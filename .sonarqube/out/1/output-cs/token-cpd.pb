∫'
TC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Services\CryptoService.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Services  
{ 
public 

class 
CryptoService 
{		 
public 
( 
string 

privatePem !
,! "
string# )
	publicPem* 3
)3 4
GenerateRsaKeyPair5 G
(G H
)H I
{ 	
using 
var 
rsa 
= 
RSA 
.  
Create  &
(& '
$num' +
)+ ,
;, -
var 

privateKey 
= 
ExportPrivateKeyPem 0
(0 1
rsa1 4
)4 5
;5 6
var 
	publicKey 
= 
ExportPublicKeyPem .
(. /
rsa/ 2
)2 3
;3 4
return 
( 

privateKey 
, 
	publicKey  )
)) *
;* +
} 	
public 
string 
SignToBase64 "
(" #
byte# '
[' (
]( )
data* .
,. /
string0 6
privateKeyPem7 D
)D E
{ 	
using 
var 
rsa 
= 
RSA 
.  
Create  &
(& '
)' (
;( )
rsa 
. 
ImportFromPem 
( 
privateKeyPem +
.+ ,
ToCharArray, 7
(7 8
)8 9
)9 :
;: ;
var 
	signature 
= 
rsa 
.  
SignData  (
(( )
data) -
,- .
HashAlgorithmName/ @
.@ A
SHA256A G
,G H
RSASignaturePaddingI \
.\ ]
Pkcs1] b
)b c
;c d
return 
Convert 
. 
ToBase64String )
() *
	signature* 3
)3 4
;4 5
} 	
public 
bool 
VerifySignature #
(# $
byte$ (
[( )
]) *
data+ /
,/ 0
string1 7
signatureBase648 G
,G H
stringI O
publicKeyPemP \
)\ ]
{ 	
using   
var   
rsa   
=   
RSA   
.    
Create    &
(  & '
)  ' (
;  ( )
rsa!! 
.!! 
ImportFromPem!! 
(!! 
publicKeyPem!! *
.!!* +
ToCharArray!!+ 6
(!!6 7
)!!7 8
)!!8 9
;!!9 :
var## 
	signature## 
=## 
Convert## #
.### $
FromBase64String##$ 4
(##4 5
signatureBase64##5 D
)##D E
;##E F
return$$ 
rsa$$ 
.$$ 

VerifyData$$ !
($$! "
data$$" &
,$$& '
	signature$$( 1
,$$1 2
HashAlgorithmName$$3 D
.$$D E
SHA256$$E K
,$$K L
RSASignaturePadding$$M `
.$$` a
Pkcs1$$a f
)$$f g
;$$g h
}%% 	
private(( 
string(( 
ExportPrivateKeyPem(( *
(((* +
RSA((+ .
rsa((/ 2
)((2 3
{)) 	
var** 
privateKeyBytes** 
=**  !
rsa**" %
.**% &!
ExportPkcs8PrivateKey**& ;
(**; <
)**< =
;**= >
var++ 
b64++ 
=++ 
Convert++ 
.++ 
ToBase64String++ ,
(++, -
privateKeyBytes++- <
,++< =#
Base64FormattingOptions++> U
.++U V
InsertLineBreaks++V f
)++f g
;++g h
return,, 
$",, 
$str,, 2
{,,2 3
b64,,3 6
},,6 7
$str,,7 R
",,R S
;,,S T
}-- 	
private// 
string// 
ExportPublicKeyPem// )
(//) *
RSA//* -
rsa//. 1
)//1 2
{00 	
var11 
publicKeyBytes11 
=11  
rsa11! $
.11$ %&
ExportSubjectPublicKeyInfo11% ?
(11? @
)11@ A
;11A B
var22 
b6422 
=22 
Convert22 
.22 
ToBase64String22 ,
(22, -
publicKeyBytes22- ;
,22; <#
Base64FormattingOptions22= T
.22T U
InsertLineBreaks22U e
)22e f
;22f g
return33 
$"33 
$str33 1
{331 2
b64332 5
}335 6
$str336 P
"33P Q
;33Q R
}44 	
}55 
}66 †v
EC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddDbContext 
<  
ApplicationDbContext 2
>2 3
(3 4
options4 ;
=>< >
{ 
var 
config 
= 
builder 
. 
Configuration &
;& '
var 
provider 
= 
config 
[ 
$str 4
]4 5
;5 6
switch 

( 
provider 
) 
{ 
case 
$str 
: 
options 
. 
UseSqlServer  
(  !
config! '
.' (
GetConnectionString( ;
(; <
$str< G
)G H
)H I
;I J
break 
; 
case   
$str   
:   
options!! 
.!! 
	UseNpgsql!! 
(!! 
config!! $
.!!$ %
GetConnectionString!!% 8
(!!8 9
$str!!9 C
)!!C D
)!!D E
;!!E F
break"" 
;"" 
case$$ 
$str$$ 
:$$ 
options%% 
.%% 
	UseSqlite%% 
(%% 
config%% $
.%%$ %
GetConnectionString%%% 8
(%%8 9
$str%%9 A
)%%A B
)%%B C
;%%C D
break&& 
;&& 
default(( 
:(( 
options)) 
.)) 
UseInMemoryDatabase)) '
())' (
$str))( 7
)))7 8
;))8 9
break** 
;** 
}++ 
},, 
),, 
;,, 
builder11 
.11 
Services11 
.22 
AddIdentity22 
<22 
ApplicationUser22  
,22  !
IdentityRole22" .
>22. /
(22/ 0
opt220 3
=>224 6
{33 
opt44 
.44 
Password44 
.44 
RequiredLength44 #
=44$ %
$num44& '
;44' (
opt55 
.55 
Password55 
.55 
RequireDigit55 !
=55" #
true55$ (
;55( )
opt66 
.66 
Password66 
.66 "
RequireNonAlphanumeric66 +
=66, -
true66. 2
;662 3
opt77 
.77 
Password77 
.77 
RequireUppercase77 %
=77& '
true77( ,
;77, -
opt88 
.88 
Password88 
.88 
RequireLowercase88 %
=88& '
false88( -
;88- .
opt99 
.99 
Password99 
.99 
RequiredUniqueChars99 (
=99) *
$num99+ ,
;99, -
opt:: 
.:: 
User:: 
.:: 
RequireUniqueEmail:: #
=::$ %
true::& *
;::* +
};; 
);; 
.<< $
AddEntityFrameworkStores<< 
<<<  
ApplicationDbContext<< 2
><<2 3
(<<3 4
)<<4 5
.== $
AddDefaultTokenProviders== 
(== 
)== 
;==  
builderBB 
.BB 
ServicesBB 
.BB 
AddAuthenticationBB "
(BB" #
optionsBB# *
=>BB+ -
{CC 
optionsDD 
.DD 
DefaultSchemeDD 
=DD (
CookieAuthenticationDefaultsDD 8
.DD8 9 
AuthenticationSchemeDD9 M
;DDM N
optionsEE 
.EE "
DefaultChallengeSchemeEE "
=EE# $!
OpenIdConnectDefaultsEE% :
.EE: ; 
AuthenticationSchemeEE; O
;EEO P
}FF 
)FF 
.GG 
	AddCookieGG 

(GG
 
)GG 
.HH 
AddOpenIdConnectHH 
(HH 
$strHH 
,HH 
optionsHH !
=>HH" $
{II 
optionsJJ 
.JJ 
	AuthorityJJ 
=JJ 
$strJJ 0
;JJ0 1
optionsKK 
.KK 
ClientIdKK 
=KK 
$strKK 
;KK 
optionsLL 
.LL 
ClientSecretLL 
=LL 
$strLL #
;LL# $
optionsMM 
.MM 
ResponseTypeMM 
=MM 
$strMM !
;MM! "
optionsOO 
.OO 
ScopeOO 
.OO 
AddOO 
(OO 
$strOO 
)OO 
;OO  
optionsPP 
.PP 
ScopePP 
.PP 
AddPP 
(PP 
$strPP 
)PP  
;PP  !
optionsQQ 
.QQ 
ScopeQQ 
.QQ 
AddQQ 
(QQ 
$strQQ 
)QQ 
;QQ 
optionsRR 
.RR 
ScopeRR 
.RR 
AddRR 
(RR 
$strRR &
)RR& '
;RR' (
optionsSS 
.SS 
ScopeSS 
.SS 
AddSS 
(SS 
$strSS "
)SS" #
;SS# $
optionsUU 
.UU 

SaveTokensUU 
=UU 
trueUU 
;UU 
optionsVV 
.VV )
GetClaimsFromUserInfoEndpointVV )
=VV* +
trueVV, 0
;VV0 1
optionsXX 
.XX %
TokenValidationParametersXX %
.XX% &
NameClaimTypeXX& 3
=XX4 5
$strXX6 J
;XXJ K
optionsYY 
.YY %
TokenValidationParametersYY %
.YY% &
RoleClaimTypeYY& 3
=YY4 5
$strYY6 <
;YY< =
options[[ 
.[[  
RequireHttpsMetadata[[  
=[[! "
false[[# (
;[[( )
}\\ 
)\\ 
;\\ 
builderaa 
.aa 
Servicesaa 
.aa #
AddControllersWithViewsaa (
(aa( )
)aa) *
;aa* +
builderbb 
.bb 
Servicesbb 
.bb 
AddControllersbb 
(bb  
)bb  !
;bb! "
buildergg 
.gg 
Servicesgg 
.gg 
AddApiVersioninggg !
(gg! "
optionsgg" )
=>gg* ,
{hh 
optionsii 
.ii /
#AssumeDefaultVersionWhenUnspecifiedii /
=ii0 1
trueii2 6
;ii6 7
optionsjj 
.jj 
DefaultApiVersionjj 
=jj 
newjj  #

ApiVersionjj$ .
(jj. /
$numjj/ 0
,jj0 1
$numjj2 3
)jj3 4
;jj4 5
optionskk 
.kk 
ReportApiVersionskk 
=kk 
truekk  $
;kk$ %
}ll 
)ll 
;ll 
buildernn 
.nn 
Servicesnn 
.nn #
AddVersionedApiExplorernn (
(nn( )
optionsnn) 0
=>nn1 3
{oo 
optionspp 
.pp 
GroupNameFormatpp 
=pp 
$strpp &
;pp& '
optionsqq 
.qq %
SubstituteApiVersionInUrlqq %
=qq& '
trueqq( ,
;qq, -
}rr 
)rr 
;rr 
builderww 
.ww 
Servicesww 
.ww 
AddTransientww 
<ww 
IConfigureOptionsww /
<ww/ 0
SwaggerGenOptionsww0 A
>wwA B
,wwB C
SwaggerConfigwwD Q
>wwQ R
(wwR S
)wwS T
;wwT U
builderxx 
.xx 
Servicesxx 
.xx 
AddSwaggerGenxx 
(xx 
)xx  
;xx  !
builderyy 
.yy 
Servicesyy 
.yy 

AddOpenApiyy 
(yy 
)yy 
;yy 
builder~~ 
.~~ 
Services~~ 
.~~ 
AddSingleton~~ 
<~~ 
ISigner~~ %
,~~% &
	RsaSigner~~' 0
>~~0 1
(~~1 2
)~~2 3
;~~3 4
builder 
. 
Services 
. 
	AddScoped 
< 
CryptoService (
>( )
() *
)* +
;+ ,
varÅÅ 
app
ÅÅ 
=
ÅÅ 	
builder
ÅÅ
 
.
ÅÅ 
Build
ÅÅ 
(
ÅÅ 
)
ÅÅ 
;
ÅÅ 
usingÜÜ 
(
ÜÜ 
var
ÜÜ 

scope
ÜÜ 
=
ÜÜ 
app
ÜÜ 
.
ÜÜ 
Services
ÜÜ 
.
ÜÜ  
CreateScope
ÜÜ  +
(
ÜÜ+ ,
)
ÜÜ, -
)
ÜÜ- .
{áá 
var
àà 
db
àà 

=
àà 
scope
àà 
.
àà 
ServiceProvider
àà "
.
àà" # 
GetRequiredService
àà# 5
<
àà5 6"
ApplicationDbContext
àà6 J
>
ààJ K
(
ààK L
)
ààL M
;
ààM N
var
ââ 
provider
ââ 
=
ââ 
builder
ââ 
.
ââ 
Configuration
ââ (
[
ââ( )
$str
ââ) C
]
ââC D
;
ââD E
if
ãã 
(
ãã 
provider
ãã 
==
ãã 
$str
ãã 
||
ãã  "
provider
ãã# +
==
ãã, .
$str
ãã/ 9
)
ãã9 :
{
åå 
try
çç 
{
éé 	
await
èè 
db
èè 
.
èè 
Database
èè 
.
èè 
MigrateAsync
èè *
(
èè* +
)
èè+ ,
;
èè, -
}
êê 	
catch
ëë 
(
ëë 
	Exception
ëë 
ex
ëë 
)
ëë 
{
íí 	
Console
ìì 
.
ìì 
	WriteLine
ìì 
(
ìì 
$str
ìì 4
+
ìì5 6
ex
ìì7 9
.
ìì9 :
Message
ìì: A
)
ììA B
;
ììB C
}
îî 	
}
ïï 
}ññ 
ifõõ 
(
õõ 
app
õõ 
.
õõ 
Environment
õõ 
.
õõ 
IsDevelopment
õõ !
(
õõ! "
)
õõ" #
)
õõ# $
{úú 
app
ùù 
.
ùù 

UseSwagger
ùù 
(
ùù 
)
ùù 
;
ùù 
app
ûû 
.
ûû 
UseSwaggerUI
ûû 
(
ûû 
options
ûû 
=>
ûû 
{
üü 
var
†† 
provider
†† 
=
†† 
app
†† 
.
†† 
Services
†† #
.
††# $ 
GetRequiredService
††$ 6
<
††6 7,
IApiVersionDescriptionProvider
††7 U
>
††U V
(
††V W
)
††W X
;
††X Y
foreach
¢¢ 
(
¢¢ 
var
¢¢ 
desc
¢¢ 
in
¢¢ 
provider
¢¢ %
.
¢¢% &$
ApiVersionDescriptions
¢¢& <
)
¢¢< =
{
££ 	
options
§§ 
.
§§ 
SwaggerEndpoint
§§ #
(
§§# $
$"
•• 
$str
•• 
{
•• 
desc
••  
.
••  !
	GroupName
••! *
}
••* +
$str
••+ 8
"
••8 9
,
••9 :
desc
¶¶ 
.
¶¶ 
	GroupName
¶¶ 
.
¶¶ 
ToUpperInvariant
¶¶ /
(
¶¶/ 0
)
¶¶0 1
)
ßß 
;
ßß 
}
®® 	
}
©© 
)
©© 
;
©© 
}™™ 
if¨¨ 
(
¨¨ 
!
¨¨ 
app
¨¨ 
.
¨¨ 	
Environment
¨¨	 
.
¨¨ 
EnvironmentName
¨¨ $
.
¨¨$ %

StartsWith
¨¨% /
(
¨¨/ 0
$str
¨¨0 6
)
¨¨6 7
)
¨¨7 8
{≠≠ 
app
ÆÆ 
.
ÆÆ !
UseHttpsRedirection
ÆÆ 
(
ÆÆ 
)
ÆÆ 
;
ÆÆ 
}ØØ 
app±± 
.
±± 
UseStaticFiles
±± 
(
±± 
)
±± 
;
±± 
app≤≤ 
.
≤≤ 

UseRouting
≤≤ 
(
≤≤ 
)
≤≤ 
;
≤≤ 
app≥≥ 
.
≥≥ 
UseAuthentication
≥≥ 
(
≥≥ 
)
≥≥ 
;
≥≥ 
app¥¥ 
.
¥¥ 
UseAuthorization
¥¥ 
(
¥¥ 
)
¥¥ 
;
¥¥ 
app∂∂ 
.
∂∂ 

MapOpenApi
∂∂ 
(
∂∂ 
)
∂∂ 
;
∂∂ 
appªª 
.
ªª 
MapControllers
ªª 
(
ªª 
)
ªª 
;
ªª 
appΩΩ 
.
ΩΩ  
MapControllerRoute
ΩΩ 
(
ΩΩ 
name
ææ 
:
ææ 	
$str
ææ
 
,
ææ 
pattern
øø 
:
øø 
$str
øø 5
)¿¿ 
;
¿¿ 
await¬¬ 
app
¬¬ 	
.
¬¬	 

RunAsync
¬¬
 
(
¬¬ 
)
¬¬ 
;
¬¬ 
	namespace«« 	
EdoSign
««
 
.
«« 
Lab_3
«« 
{»» 
public
…… 

class
…… 
SwaggerConfig
…… 
:
……  
IConfigureOptions
……! 2
<
……2 3
SwaggerGenOptions
……3 D
>
……D E
{
   
private
ÀÀ 
readonly
ÀÀ ,
IApiVersionDescriptionProvider
ÀÀ 7
	_provider
ÀÀ8 A
;
ÀÀA B
public
ÕÕ 
SwaggerConfig
ÕÕ 
(
ÕÕ ,
IApiVersionDescriptionProvider
ÕÕ ;
provider
ÕÕ< D
)
ÕÕD E
{
ŒŒ 	
	_provider
œœ 
=
œœ 
provider
œœ  
;
œœ  !
}
–– 	
public
““ 
void
““ 
	Configure
““ 
(
““ 
SwaggerGenOptions
““ /
options
““0 7
)
““7 8
{
”” 	
foreach
‘‘ 
(
‘‘ 
var
‘‘ 
desc
‘‘ 
in
‘‘  
	_provider
‘‘! *
.
‘‘* +$
ApiVersionDescriptions
‘‘+ A
)
‘‘A B
{
’’ 
options
÷÷ 
.
÷÷ 

SwaggerDoc
÷÷ "
(
÷÷" #
desc
÷÷# '
.
÷÷' (
	GroupName
÷÷( 1
,
÷÷1 2
new
÷÷3 6
OpenApiInfo
÷÷7 B
{
◊◊ 
Title
ÿÿ 
=
ÿÿ 
$str
ÿÿ )
,
ÿÿ) *
Version
ŸŸ 
=
ŸŸ 
desc
ŸŸ "
.
ŸŸ" #

ApiVersion
ŸŸ# -
.
ŸŸ- .
ToString
ŸŸ. 6
(
ŸŸ6 7
)
ŸŸ7 8
}
⁄⁄ 
)
⁄⁄ 
;
⁄⁄ 
}
€€ 
}
‹‹ 	
}
›› 
}ﬁﬁ Ê
_C:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\ViewModels\UploadViewModel.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 

ViewModels )
{ 
public 

class 
UploadViewModel  
{ 
public 
	IFormFile 
File 
{ 
get  #
;# $
set% (
;( )
}* +
public

 
int

 
ClientId

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
public 
List 
< 
SelectListItem "
>" #
Clients$ +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
int 
DocumentTypeId !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
List 
< 
SelectListItem "
>" #
DocumentTypes$ 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public 
DateTime 

UploadedAt "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
DateTime3 ;
.; <
Now< ?
;? @
} 
} ë!
aC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\ViewModels\RegisterViewModel.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 

ViewModels )
;) *
public 
class 
RegisterViewModel 
{ 
[ 
Required 
] 
[ 
StringLength 
( 
$num 
, 
ErrorMessage "
=# $
$str% ;
); <
]< =
[		 
Display		 
(		 
Name		 
=		 
$str		 
)		 
]		 
public

 

string

 
UserName

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
=

) *
default

+ 2
!

2 3
;

3 4
[ 
Required 
] 
[ 
StringLength 
( 
$num 
, 
ErrorMessage #
=$ %
$str& ;
); <
]< =
[ 
Display 
( 
Name 
= 
$str &
)& '
]' (
public 

string 
FullName 
{ 
get  
;  !
set" %
;% &
}' (
=) *
default+ 2
!2 3
;3 4
[ 
Required 
] 
[ 
StringLength 
( 
$num 
, 
MinimumLength #
=$ %
$num& '
,' (
ErrorMessage) 5
=6 7
$str8 N
)N O
]O P
[ 
DataType 
( 
DataType 
. 
Password 
)  
]  !
[ 
Display 
( 
Name 
= 
$str 
) 
] 
public 

string 
Password 
{ 
get  
;  !
set" %
;% &
}' (
=) *
default+ 2
!2 3
;3 4
[ 
Required 
] 
[ 
DataType 
( 
DataType 
. 
Password 
)  
]  !
[ 
Compare 
( 
nameof 
( 
Password 
) 
, 
ErrorMessage +
=, -
$str. E
)E F
]F G
[ 
Display 
( 
Name 
= 
$str *
)* +
]+ ,
public 

string 
ConfirmPassword !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
default2 9
!9 :
;: ;
[ 
Required 
] 
[ 
Display 
( 
Name 
= 
$str 
) 
] 
[   
RegularExpression   
(   
$str   &
,  & '
ErrorMessage  ( 4
=  5 6
$str  7 X
)  X Y
]  Y Z
public!! 

string!! 
Phone!! 
{!! 
get!! 
;!! 
set!! "
;!!" #
}!!$ %
=!!& '
default!!( /
!!!/ 0
;!!0 1
[$$ 
Required$$ 
]$$ 
[%% 
EmailAddress%% 
(%% 
ErrorMessage%% 
=%%  
$str%%! 4
)%%4 5
]%%5 6
[&& 
Display&& 
(&& 
Name&& 
=&& 
$str&& 
)&& 
]&& 
public'' 

string'' 
Email'' 
{'' 
get'' 
;'' 
set'' "
;''" #
}''$ %
=''& '
default''( /
!''/ 0
;''0 1
}(( ¿
^C:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\ViewModels\LoginViewModel.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 

ViewModels )
;) *
public 
class 
LoginViewModel 
{ 
[ 
Required 
] 
[ 
Display 
( 
Name 
= 
$str %
)% &
]& '
public		 

string		 
UserNameOrEmail		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
=		0 1
default		2 9
!		9 :
;		: ;
[ 
Required 
] 
[ 
DataType 
( 
DataType 
. 
Password 
)  
]  !
[ 
Display 
( 
Name 
= 
$str 
) 
] 
public 

string 
Password 
{ 
get  
;  !
set" %
;% &
}' (
=) *
default+ 2
!2 3
;3 4
[ 
Display 
( 
Name 
= 
$str &
)& '
]' (
public 

bool 

RememberMe 
{ 
get  
;  !
set" %
;% &
}' (
} ô

cC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\ViewModels\FileVerifyViewModel.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 

ViewModels )
{ 
public 

class 
FileVerifyViewModel $
{ 
[ 	
Required	 
( 
ErrorMessage 
=  
$str! 3
)3 4
]4 5
public 
string 
? 
FileId 
{ 
get  #
;# $
set% (
;( )
}* +
[

 	
Required

	 
(

 
ErrorMessage

 
=

  
$str

! G
)

G H
]

H I
[ 	
Display	 
( 
Name 
= 
$str .
). /
]/ 0
public 
string 
? 
PublicKeyPem #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
bool 
? 
IsValid 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} €
cC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\ViewModels\FileUploadViewModel.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 

ViewModels )
{ 
public 

class 
FileUploadViewModel $
{ 
[ 	
Required	 
( 
ErrorMessage 
=  
$str! @
)@ A
]A B
public		 
	IFormFile		 
?		 
File		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
public 
string 
? 
FileId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} °

bC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\ViewModels\FileSignViewModels.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 

ViewModels )
{ 
public 

class 
FileSignViewModel "
{ 
[ 	
Required	 
( 
ErrorMessage 
=  
$str! 3
)3 4
]4 5
public 
string 
? 
FileId 
{ 
get  #
;# $
set% (
;( )
}* +
[

 	
Required

	 
(

 
ErrorMessage

 
=

  
$str

! G
)

G H
]

H I
[ 	
Display	 
( 
Name 
= 
$str .
). /
]/ 0
public 
string 
? 
PrivateKeyPem $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
? 
SignatureBase64 &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
} ¶
gC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\ViewModels\DocumentSearchViewModel.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 

ViewModels )
{ 
public 

class #
DocumentSearchViewModel (
{ 
public 
DateTime 
? 
DateFrom !
{" #
get$ '
;' (
set) ,
;, -
}. /
public		 
DateTime		 
?		 
DateTo		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
public 
List 
< 
int 
> 
? 
SelectedClientIds +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
List 
< 
SelectListItem "
>" #
Clients$ +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
=: ;
new< ?
(? @
)@ A
;A B
public 
string 
? 
FileNameStartsWith )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
string 
? 
FileNameEndsWith '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
List 
< 
SignedDocument "
>" #
?# $
Results% ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
} 
} Æ
WC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\Orm\SignedDocument.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 
Orm "
{ 
public 

class 
SignedDocument 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
FileName 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
null/ 3
!3 4
;4 5
public 
DateTime 

UploadedAt "
{# $
get% (
;( )
set* -
;- .
}/ 0
public		 
int		 
ClientId		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public

 
Client

 
Client

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
=

+ ,
null

- 1
!

1 2
;

2 3
public 
int 
DocumentTypeId !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DocumentType 
DocumentType (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
=7 8
null9 =
!= >
;> ?
public 
bool 
IsSigned 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime 
? 
SignedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} Ú	
UC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\Orm\DocumentType.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 
Orm "
{ 
public 

class 
DocumentType 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
null+ /
!/ 0
;0 1
public 
string 
? 
Description "
{# $
get% (
;( )
set* -
;- .
}/ 0
public		 
ICollection		 
<		 
SignedDocument		 )
>		) *
SignedDocuments		+ :
{		; <
get		= @
;		@ A
set		B E
;		E F
}		G H
=		I J
new		K N
List		O S
<		S T
SignedDocument		T b
>		b c
(		c d
)		d e
;		e f
}

 
} ê

OC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\Orm\Client.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 
Orm "
{ 
public 

class 
Client 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
null+ /
!/ 0
;0 1
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
=* +
null, 0
!0 1
;1 2
public		 
ICollection		 
<		 
SignedDocument		 )
>		) *
SignedDocuments		+ :
{		; <
get		= @
;		@ A
set		B E
;		E F
}		G H
=

 
new

 
List

 
<

 
SignedDocument

 %
>

% &
(

& '
)

' (
;

( )
} 
} Õ
SC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\ErrorViewModel.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
{ 
public 

class 
ErrorViewModel 
{ 
public 
string 
? 
	RequestId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
ShowRequestId !
=>" $
!% &
string& ,
., -
IsNullOrEmpty- :
(: ;
	RequestId; D
)D E
;E F
} 
}		 »
XC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\Entities\FileEntity.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 
Entities '
{ 
public 

class 

FileEntity 
{ 
[ 	
Key	 
] 
public 
Guid 
Id 
{ 
get 
; 
set !
;! "
}# $
[

 	
Required

	 
]

 
public 
string 
FileName 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
[ 	
Required	 
] 
public 
string 
FilePath 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
string 
? 
SignatureBase64 &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
? 
PublicKeyPem #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
DateTime 

UploadedAt "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
DateTime3 ;
.; <
UtcNow< B
;B C
} 
} Ç
\C:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\Dto\SignedDocumentV2Dto.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 
Dto "
{ 
public 

class 
SignedDocumentV2Dto $
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
FileName 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
null/ 3
!3 4
;4 5
public 
string 

ClientName  
{! "
get# &
;& '
set( +
;+ ,
}- .
=/ 0
null1 5
!5 6
;6 7
public		 
string		 
DocumentTypeName		 &
{		' (
get		) ,
;		, -
set		. 1
;		1 2
}		3 4
=		5 6
null		7 ;
!		; <
;		< =
public 
DateTime 

UploadedAt "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
bool 
IsSigned 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime 
? 
SignedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} “
\C:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\Dto\SignedDocumentV1Dto.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 
Dto "
{ 
public 

class 
SignedDocumentV1Dto $
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
FileName 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
null/ 3
!3 4
;4 5
public 
string 

ClientName  
{! "
get# &
;& '
set( +
;+ ,
}- .
=/ 0
null1 5
!5 6
;6 7
public 
bool 
IsSigned 
{ 
get "
;" #
set$ '
;' (
}) *
}		 
}

 ¢
ZC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\Dto\DocumentTypeV2Dto.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 
Dto "
{ 
public 

class 
DocumentTypeV2Dto "
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
null+ /
!/ 0
;0 1
public		 
string		 
Description		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
=		0 1
$str		2 4
;		4 5
}

 
} ”
ZC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\Dto\DocumentTypeV1Dto.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 
Dto "
{ 
public 

class 
DocumentTypeV1Dto "
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
null+ /
!/ 0
;0 1
} 
} Å
TC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\Dto\ClientV2Dto.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 
Dto "
{ 
public 

class 
ClientV2Dto 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
$str+ -
;- .
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
=* +
$str, .
;. /
} 
}		 ∏
TC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\Dto\ClientV1Dto.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
. 
Dto "
{ 
public 

class 
ClientV1Dto 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
$str+ -
;- .
} 
} ∂
TC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Models\ApplicationUser.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Models 
; 
public 
class 
ApplicationUser 
: 
IdentityUser +
{ 
[ 
StringLength 
( 
$num 
, 
ErrorMessage #
=$ %
$str& B
)B C
]C D
public 

string 
? 
FullName 
{ 
get !
;! "
set# &
;& '
}( )
} é«
eC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Migrations\20251120131012_InitSqlServer.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 

Migrations "
{		 
public 

partial 
class 
InitSqlServer &
:' (
	Migration) 2
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
type. 2
:2 3
$str4 C
,C D
nullableE M
:M N
falseO T
)T U
,U V
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 E
,E F
	maxLengthG P
:P Q
$numR U
,U V
nullableW _
:_ `
truea e
)e f
,f g
NormalizedName "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
type: >
:> ?
$str@ O
,O P
	maxLengthQ Z
:Z [
$num\ _
,_ `
nullablea i
:i j
truek o
)o p
,p q
ConcurrencyStamp $
=% &
table' ,
., -
Column- 3
<3 4
string4 :
>: ;
(; <
type< @
:@ A
$strB Q
,Q R
nullableS [
:[ \
true] a
)a b
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns   
:   
table   
=>   !
new  " %
{!! 
Id"" 
="" 
table"" 
."" 
Column"" %
<""% &
string""& ,
>"", -
(""- .
type"". 2
:""2 3
$str""4 C
,""C D
nullable""E M
:""M N
false""O T
)""T U
,""U V
FullName## 
=## 
table## $
.##$ %
Column##% +
<##+ ,
string##, 2
>##2 3
(##3 4
type##4 8
:##8 9
$str##: I
,##I J
	maxLength##K T
:##T U
$num##V Y
,##Y Z
nullable##[ c
:##c d
true##e i
)##i j
,##j k
UserName$$ 
=$$ 
table$$ $
.$$$ %
Column$$% +
<$$+ ,
string$$, 2
>$$2 3
($$3 4
type$$4 8
:$$8 9
$str$$: I
,$$I J
	maxLength$$K T
:$$T U
$num$$V Y
,$$Y Z
nullable$$[ c
:$$c d
true$$e i
)$$i j
,$$j k
NormalizedUserName%% &
=%%' (
table%%) .
.%%. /
Column%%/ 5
<%%5 6
string%%6 <
>%%< =
(%%= >
type%%> B
:%%B C
$str%%D S
,%%S T
	maxLength%%U ^
:%%^ _
$num%%` c
,%%c d
nullable%%e m
:%%m n
true%%o s
)%%s t
,%%t u
Email&& 
=&& 
table&& !
.&&! "
Column&&" (
<&&( )
string&&) /
>&&/ 0
(&&0 1
type&&1 5
:&&5 6
$str&&7 F
,&&F G
	maxLength&&H Q
:&&Q R
$num&&S V
,&&V W
nullable&&X `
:&&` a
true&&b f
)&&f g
,&&g h
NormalizedEmail'' #
=''$ %
table''& +
.''+ ,
Column'', 2
<''2 3
string''3 9
>''9 :
('': ;
type''; ?
:''? @
$str''A P
,''P Q
	maxLength''R [
:''[ \
$num''] `
,''` a
nullable''b j
:''j k
true''l p
)''p q
,''q r
EmailConfirmed(( "
=((# $
table((% *
.((* +
Column((+ 1
<((1 2
bool((2 6
>((6 7
(((7 8
type((8 <
:((< =
$str((> C
,((C D
nullable((E M
:((M N
false((O T
)((T U
,((U V
PasswordHash))  
=))! "
table))# (
.))( )
Column))) /
<))/ 0
string))0 6
>))6 7
())7 8
type))8 <
:))< =
$str))> M
,))M N
nullable))O W
:))W X
true))Y ]
)))] ^
,))^ _
SecurityStamp** !
=**" #
table**$ )
.**) *
Column*** 0
<**0 1
string**1 7
>**7 8
(**8 9
type**9 =
:**= >
$str**? N
,**N O
nullable**P X
:**X Y
true**Z ^
)**^ _
,**_ `
ConcurrencyStamp++ $
=++% &
table++' ,
.++, -
Column++- 3
<++3 4
string++4 :
>++: ;
(++; <
type++< @
:++@ A
$str++B Q
,++Q R
nullable++S [
:++[ \
true++] a
)++a b
,++b c
PhoneNumber,, 
=,,  !
table,," '
.,,' (
Column,,( .
<,,. /
string,,/ 5
>,,5 6
(,,6 7
type,,7 ;
:,,; <
$str,,= L
,,,L M
nullable,,N V
:,,V W
true,,X \
),,\ ]
,,,] ^ 
PhoneNumberConfirmed-- (
=--) *
table--+ 0
.--0 1
Column--1 7
<--7 8
bool--8 <
>--< =
(--= >
type--> B
:--B C
$str--D I
,--I J
nullable--K S
:--S T
false--U Z
)--Z [
,--[ \
TwoFactorEnabled.. $
=..% &
table..' ,
..., -
Column..- 3
<..3 4
bool..4 8
>..8 9
(..9 :
type..: >
:..> ?
$str..@ E
,..E F
nullable..G O
:..O P
false..Q V
)..V W
,..W X

LockoutEnd// 
=//  
table//! &
.//& '
Column//' -
<//- .
DateTimeOffset//. <
>//< =
(//= >
type//> B
://B C
$str//D T
,//T U
nullable//V ^
://^ _
true//` d
)//d e
,//e f
LockoutEnabled00 "
=00# $
table00% *
.00* +
Column00+ 1
<001 2
bool002 6
>006 7
(007 8
type008 <
:00< =
$str00> C
,00C D
nullable00E M
:00M N
false00O T
)00T U
,00U V
AccessFailedCount11 %
=11& '
table11( -
.11- .
Column11. 4
<114 5
int115 8
>118 9
(119 :
type11: >
:11> ?
$str11@ E
,11E F
nullable11G O
:11O P
false11Q V
)11V W
}22 
,22 
constraints33 
:33 
table33 "
=>33# %
{44 
table55 
.55 

PrimaryKey55 $
(55$ %
$str55% 5
,555 6
x557 8
=>559 ;
x55< =
.55= >
Id55> @
)55@ A
;55A B
}66 
)66 
;66 
migrationBuilder88 
.88 
CreateTable88 (
(88( )
name99 
:99 
$str99 
,99  
columns:: 
::: 
table:: 
=>:: !
new::" %
{;; 
Id<< 
=<< 
table<< 
.<< 
Column<< %
<<<% &
int<<& )
><<) *
(<<* +
type<<+ /
:<</ 0
$str<<1 6
,<<6 7
nullable<<8 @
:<<@ A
false<<B G
)<<G H
.== 

Annotation== #
(==# $
$str==$ 8
,==8 9
$str==: @
)==@ A
,==A B
Name>> 
=>> 
table>>  
.>>  !
Column>>! '
<>>' (
string>>( .
>>>. /
(>>/ 0
type>>0 4
:>>4 5
$str>>6 E
,>>E F
nullable>>G O
:>>O P
false>>Q V
)>>V W
,>>W X
Email?? 
=?? 
table?? !
.??! "
Column??" (
<??( )
string??) /
>??/ 0
(??0 1
type??1 5
:??5 6
$str??7 F
,??F G
nullable??H P
:??P Q
false??R W
)??W X
}@@ 
,@@ 
constraintsAA 
:AA 
tableAA "
=>AA# %
{BB 
tableCC 
.CC 

PrimaryKeyCC $
(CC$ %
$strCC% 1
,CC1 2
xCC3 4
=>CC5 7
xCC8 9
.CC9 :
IdCC: <
)CC< =
;CC= >
}DD 
)DD 
;DD 
migrationBuilderFF 
.FF 
CreateTableFF (
(FF( )
nameGG 
:GG 
$strGG %
,GG% &
columnsHH 
:HH 
tableHH 
=>HH !
newHH" %
{II 
IdJJ 
=JJ 
tableJJ 
.JJ 
ColumnJJ %
<JJ% &
intJJ& )
>JJ) *
(JJ* +
typeJJ+ /
:JJ/ 0
$strJJ1 6
,JJ6 7
nullableJJ8 @
:JJ@ A
falseJJB G
)JJG H
.KK 

AnnotationKK #
(KK# $
$strKK$ 8
,KK8 9
$strKK: @
)KK@ A
,KKA B
NameLL 
=LL 
tableLL  
.LL  !
ColumnLL! '
<LL' (
stringLL( .
>LL. /
(LL/ 0
typeLL0 4
:LL4 5
$strLL6 E
,LLE F
nullableLLG O
:LLO P
falseLLQ V
)LLV W
,LLW X
DescriptionMM 
=MM  !
tableMM" '
.MM' (
ColumnMM( .
<MM. /
stringMM/ 5
>MM5 6
(MM6 7
typeMM7 ;
:MM; <
$strMM= L
,MML M
nullableMMN V
:MMV W
trueMMX \
)MM\ ]
}NN 
,NN 
constraintsOO 
:OO 
tableOO "
=>OO# %
{PP 
tableQQ 
.QQ 

PrimaryKeyQQ $
(QQ$ %
$strQQ% 7
,QQ7 8
xQQ9 :
=>QQ; =
xQQ> ?
.QQ? @
IdQQ@ B
)QQB C
;QQC D
}RR 
)RR 
;RR 
migrationBuilderTT 
.TT 
CreateTableTT (
(TT( )
nameUU 
:UU 
$strUU 
,UU 
columnsVV 
:VV 
tableVV 
=>VV !
newVV" %
{WW 
IdXX 
=XX 
tableXX 
.XX 
ColumnXX %
<XX% &
GuidXX& *
>XX* +
(XX+ ,
typeXX, 0
:XX0 1
$strXX2 D
,XXD E
nullableXXF N
:XXN O
falseXXP U
)XXU V
,XXV W
FileNameYY 
=YY 
tableYY $
.YY$ %
ColumnYY% +
<YY+ ,
stringYY, 2
>YY2 3
(YY3 4
typeYY4 8
:YY8 9
$strYY: I
,YYI J
nullableYYK S
:YYS T
falseYYU Z
)YYZ [
,YY[ \
FilePathZZ 
=ZZ 
tableZZ $
.ZZ$ %
ColumnZZ% +
<ZZ+ ,
stringZZ, 2
>ZZ2 3
(ZZ3 4
typeZZ4 8
:ZZ8 9
$strZZ: I
,ZZI J
nullableZZK S
:ZZS T
falseZZU Z
)ZZZ [
,ZZ[ \
SignatureBase64[[ #
=[[$ %
table[[& +
.[[+ ,
Column[[, 2
<[[2 3
string[[3 9
>[[9 :
([[: ;
type[[; ?
:[[? @
$str[[A P
,[[P Q
nullable[[R Z
:[[Z [
true[[\ `
)[[` a
,[[a b
PublicKeyPem\\  
=\\! "
table\\# (
.\\( )
Column\\) /
<\\/ 0
string\\0 6
>\\6 7
(\\7 8
type\\8 <
:\\< =
$str\\> M
,\\M N
nullable\\O W
:\\W X
true\\Y ]
)\\] ^
,\\^ _

UploadedAt]] 
=]]  
table]]! &
.]]& '
Column]]' -
<]]- .
DateTime]]. 6
>]]6 7
(]]7 8
type]]8 <
:]]< =
$str]]> I
,]]I J
nullable]]K S
:]]S T
false]]U Z
)]]Z [
}^^ 
,^^ 
constraints__ 
:__ 
table__ "
=>__# %
{`` 
tableaa 
.aa 

PrimaryKeyaa $
(aa$ %
$straa% /
,aa/ 0
xaa1 2
=>aa3 5
xaa6 7
.aa7 8
Idaa8 :
)aa: ;
;aa; <
}bb 
)bb 
;bb 
migrationBuilderdd 
.dd 
CreateTabledd (
(dd( )
nameee 
:ee 
$stree (
,ee( )
columnsff 
:ff 
tableff 
=>ff !
newff" %
{gg 
Idhh 
=hh 
tablehh 
.hh 
Columnhh %
<hh% &
inthh& )
>hh) *
(hh* +
typehh+ /
:hh/ 0
$strhh1 6
,hh6 7
nullablehh8 @
:hh@ A
falsehhB G
)hhG H
.ii 

Annotationii #
(ii# $
$strii$ 8
,ii8 9
$strii: @
)ii@ A
,iiA B
RoleIdjj 
=jj 
tablejj "
.jj" #
Columnjj# )
<jj) *
stringjj* 0
>jj0 1
(jj1 2
typejj2 6
:jj6 7
$strjj8 G
,jjG H
nullablejjI Q
:jjQ R
falsejjS X
)jjX Y
,jjY Z
	ClaimTypekk 
=kk 
tablekk  %
.kk% &
Columnkk& ,
<kk, -
stringkk- 3
>kk3 4
(kk4 5
typekk5 9
:kk9 :
$strkk; J
,kkJ K
nullablekkL T
:kkT U
truekkV Z
)kkZ [
,kk[ \

ClaimValuell 
=ll  
tablell! &
.ll& '
Columnll' -
<ll- .
stringll. 4
>ll4 5
(ll5 6
typell6 :
:ll: ;
$strll< K
,llK L
nullablellM U
:llU V
truellW [
)ll[ \
}mm 
,mm 
constraintsnn 
:nn 
tablenn "
=>nn# %
{oo 
tablepp 
.pp 

PrimaryKeypp $
(pp$ %
$strpp% :
,pp: ;
xpp< =
=>pp> @
xppA B
.ppB C
IdppC E
)ppE F
;ppF G
tableqq 
.qq 

ForeignKeyqq $
(qq$ %
namerr 
:rr 
$strrr F
,rrF G
columnss 
:ss 
xss  !
=>ss" $
xss% &
.ss& '
RoleIdss' -
,ss- .
principalTablett &
:tt& '
$strtt( 5
,tt5 6
principalColumnuu '
:uu' (
$struu) -
,uu- .
onDeletevv  
:vv  !
ReferentialActionvv" 3
.vv3 4
Cascadevv4 ;
)vv; <
;vv< =
}ww 
)ww 
;ww 
migrationBuilderyy 
.yy 
CreateTableyy (
(yy( )
namezz 
:zz 
$strzz (
,zz( )
columns{{ 
:{{ 
table{{ 
=>{{ !
new{{" %
{|| 
Id}} 
=}} 
table}} 
.}} 
Column}} %
<}}% &
int}}& )
>}}) *
(}}* +
type}}+ /
:}}/ 0
$str}}1 6
,}}6 7
nullable}}8 @
:}}@ A
false}}B G
)}}G H
.~~ 

Annotation~~ #
(~~# $
$str~~$ 8
,~~8 9
$str~~: @
)~~@ A
,~~A B
UserId 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 G
,G H
nullableI Q
:Q R
falseS X
)X Y
,Y Z
	ClaimType
ÄÄ 
=
ÄÄ 
table
ÄÄ  %
.
ÄÄ% &
Column
ÄÄ& ,
<
ÄÄ, -
string
ÄÄ- 3
>
ÄÄ3 4
(
ÄÄ4 5
type
ÄÄ5 9
:
ÄÄ9 :
$str
ÄÄ; J
,
ÄÄJ K
nullable
ÄÄL T
:
ÄÄT U
true
ÄÄV Z
)
ÄÄZ [
,
ÄÄ[ \

ClaimValue
ÅÅ 
=
ÅÅ  
table
ÅÅ! &
.
ÅÅ& '
Column
ÅÅ' -
<
ÅÅ- .
string
ÅÅ. 4
>
ÅÅ4 5
(
ÅÅ5 6
type
ÅÅ6 :
:
ÅÅ: ;
$str
ÅÅ< K
,
ÅÅK L
nullable
ÅÅM U
:
ÅÅU V
true
ÅÅW [
)
ÅÅ[ \
}
ÇÇ 
,
ÇÇ 
constraints
ÉÉ 
:
ÉÉ 
table
ÉÉ "
=>
ÉÉ# %
{
ÑÑ 
table
ÖÖ 
.
ÖÖ 

PrimaryKey
ÖÖ $
(
ÖÖ$ %
$str
ÖÖ% :
,
ÖÖ: ;
x
ÖÖ< =
=>
ÖÖ> @
x
ÖÖA B
.
ÖÖB C
Id
ÖÖC E
)
ÖÖE F
;
ÖÖF G
table
ÜÜ 
.
ÜÜ 

ForeignKey
ÜÜ $
(
ÜÜ$ %
name
áá 
:
áá 
$str
áá F
,
ááF G
column
àà 
:
àà 
x
àà  !
=>
àà" $
x
àà% &
.
àà& '
UserId
àà' -
,
àà- .
principalTable
ââ &
:
ââ& '
$str
ââ( 5
,
ââ5 6
principalColumn
ää '
:
ää' (
$str
ää) -
,
ää- .
onDelete
ãã  
:
ãã  !
ReferentialAction
ãã" 3
.
ãã3 4
Cascade
ãã4 ;
)
ãã; <
;
ãã< =
}
åå 
)
åå 
;
åå 
migrationBuilder
éé 
.
éé 
CreateTable
éé (
(
éé( )
name
èè 
:
èè 
$str
èè (
,
èè( )
columns
êê 
:
êê 
table
êê 
=>
êê !
new
êê" %
{
ëë 
LoginProvider
íí !
=
íí" #
table
íí$ )
.
íí) *
Column
íí* 0
<
íí0 1
string
íí1 7
>
íí7 8
(
íí8 9
type
íí9 =
:
íí= >
$str
íí? N
,
ííN O
nullable
ííP X
:
ííX Y
false
ííZ _
)
íí_ `
,
íí` a
ProviderKey
ìì 
=
ìì  !
table
ìì" '
.
ìì' (
Column
ìì( .
<
ìì. /
string
ìì/ 5
>
ìì5 6
(
ìì6 7
type
ìì7 ;
:
ìì; <
$str
ìì= L
,
ììL M
nullable
ììN V
:
ììV W
false
ììX ]
)
ìì] ^
,
ìì^ _!
ProviderDisplayName
îî '
=
îî( )
table
îî* /
.
îî/ 0
Column
îî0 6
<
îî6 7
string
îî7 =
>
îî= >
(
îî> ?
type
îî? C
:
îîC D
$str
îîE T
,
îîT U
nullable
îîV ^
:
îî^ _
true
îî` d
)
îîd e
,
îîe f
UserId
ïï 
=
ïï 
table
ïï "
.
ïï" #
Column
ïï# )
<
ïï) *
string
ïï* 0
>
ïï0 1
(
ïï1 2
type
ïï2 6
:
ïï6 7
$str
ïï8 G
,
ïïG H
nullable
ïïI Q
:
ïïQ R
false
ïïS X
)
ïïX Y
}
ññ 
,
ññ 
constraints
óó 
:
óó 
table
óó "
=>
óó# %
{
òò 
table
ôô 
.
ôô 

PrimaryKey
ôô $
(
ôô$ %
$str
ôô% :
,
ôô: ;
x
ôô< =
=>
ôô> @
new
ôôA D
{
ôôE F
x
ôôG H
.
ôôH I
LoginProvider
ôôI V
,
ôôV W
x
ôôX Y
.
ôôY Z
ProviderKey
ôôZ e
}
ôôf g
)
ôôg h
;
ôôh i
table
öö 
.
öö 

ForeignKey
öö $
(
öö$ %
name
õõ 
:
õõ 
$str
õõ F
,
õõF G
column
úú 
:
úú 
x
úú  !
=>
úú" $
x
úú% &
.
úú& '
UserId
úú' -
,
úú- .
principalTable
ùù &
:
ùù& '
$str
ùù( 5
,
ùù5 6
principalColumn
ûû '
:
ûû' (
$str
ûû) -
,
ûû- .
onDelete
üü  
:
üü  !
ReferentialAction
üü" 3
.
üü3 4
Cascade
üü4 ;
)
üü; <
;
üü< =
}
†† 
)
†† 
;
†† 
migrationBuilder
¢¢ 
.
¢¢ 
CreateTable
¢¢ (
(
¢¢( )
name
££ 
:
££ 
$str
££ '
,
££' (
columns
§§ 
:
§§ 
table
§§ 
=>
§§ !
new
§§" %
{
•• 
UserId
¶¶ 
=
¶¶ 
table
¶¶ "
.
¶¶" #
Column
¶¶# )
<
¶¶) *
string
¶¶* 0
>
¶¶0 1
(
¶¶1 2
type
¶¶2 6
:
¶¶6 7
$str
¶¶8 G
,
¶¶G H
nullable
¶¶I Q
:
¶¶Q R
false
¶¶S X
)
¶¶X Y
,
¶¶Y Z
RoleId
ßß 
=
ßß 
table
ßß "
.
ßß" #
Column
ßß# )
<
ßß) *
string
ßß* 0
>
ßß0 1
(
ßß1 2
type
ßß2 6
:
ßß6 7
$str
ßß8 G
,
ßßG H
nullable
ßßI Q
:
ßßQ R
false
ßßS X
)
ßßX Y
}
®® 
,
®® 
constraints
©© 
:
©© 
table
©© "
=>
©©# %
{
™™ 
table
´´ 
.
´´ 

PrimaryKey
´´ $
(
´´$ %
$str
´´% 9
,
´´9 :
x
´´; <
=>
´´= ?
new
´´@ C
{
´´D E
x
´´F G
.
´´G H
UserId
´´H N
,
´´N O
x
´´P Q
.
´´Q R
RoleId
´´R X
}
´´Y Z
)
´´Z [
;
´´[ \
table
¨¨ 
.
¨¨ 

ForeignKey
¨¨ $
(
¨¨$ %
name
≠≠ 
:
≠≠ 
$str
≠≠ E
,
≠≠E F
column
ÆÆ 
:
ÆÆ 
x
ÆÆ  !
=>
ÆÆ" $
x
ÆÆ% &
.
ÆÆ& '
RoleId
ÆÆ' -
,
ÆÆ- .
principalTable
ØØ &
:
ØØ& '
$str
ØØ( 5
,
ØØ5 6
principalColumn
∞∞ '
:
∞∞' (
$str
∞∞) -
,
∞∞- .
onDelete
±±  
:
±±  !
ReferentialAction
±±" 3
.
±±3 4
Cascade
±±4 ;
)
±±; <
;
±±< =
table
≤≤ 
.
≤≤ 

ForeignKey
≤≤ $
(
≤≤$ %
name
≥≥ 
:
≥≥ 
$str
≥≥ E
,
≥≥E F
column
¥¥ 
:
¥¥ 
x
¥¥  !
=>
¥¥" $
x
¥¥% &
.
¥¥& '
UserId
¥¥' -
,
¥¥- .
principalTable
µµ &
:
µµ& '
$str
µµ( 5
,
µµ5 6
principalColumn
∂∂ '
:
∂∂' (
$str
∂∂) -
,
∂∂- .
onDelete
∑∑  
:
∑∑  !
ReferentialAction
∑∑" 3
.
∑∑3 4
Cascade
∑∑4 ;
)
∑∑; <
;
∑∑< =
}
∏∏ 
)
∏∏ 
;
∏∏ 
migrationBuilder
∫∫ 
.
∫∫ 
CreateTable
∫∫ (
(
∫∫( )
name
ªª 
:
ªª 
$str
ªª (
,
ªª( )
columns
ºº 
:
ºº 
table
ºº 
=>
ºº !
new
ºº" %
{
ΩΩ 
UserId
ææ 
=
ææ 
table
ææ "
.
ææ" #
Column
ææ# )
<
ææ) *
string
ææ* 0
>
ææ0 1
(
ææ1 2
type
ææ2 6
:
ææ6 7
$str
ææ8 G
,
ææG H
nullable
ææI Q
:
ææQ R
false
ææS X
)
ææX Y
,
ææY Z
LoginProvider
øø !
=
øø" #
table
øø$ )
.
øø) *
Column
øø* 0
<
øø0 1
string
øø1 7
>
øø7 8
(
øø8 9
type
øø9 =
:
øø= >
$str
øø? N
,
øøN O
nullable
øøP X
:
øøX Y
false
øøZ _
)
øø_ `
,
øø` a
Name
¿¿ 
=
¿¿ 
table
¿¿  
.
¿¿  !
Column
¿¿! '
<
¿¿' (
string
¿¿( .
>
¿¿. /
(
¿¿/ 0
type
¿¿0 4
:
¿¿4 5
$str
¿¿6 E
,
¿¿E F
nullable
¿¿G O
:
¿¿O P
false
¿¿Q V
)
¿¿V W
,
¿¿W X
Value
¡¡ 
=
¡¡ 
table
¡¡ !
.
¡¡! "
Column
¡¡" (
<
¡¡( )
string
¡¡) /
>
¡¡/ 0
(
¡¡0 1
type
¡¡1 5
:
¡¡5 6
$str
¡¡7 F
,
¡¡F G
nullable
¡¡H P
:
¡¡P Q
true
¡¡R V
)
¡¡V W
}
¬¬ 
,
¬¬ 
constraints
√√ 
:
√√ 
table
√√ "
=>
√√# %
{
ƒƒ 
table
≈≈ 
.
≈≈ 

PrimaryKey
≈≈ $
(
≈≈$ %
$str
≈≈% :
,
≈≈: ;
x
≈≈< =
=>
≈≈> @
new
≈≈A D
{
≈≈E F
x
≈≈G H
.
≈≈H I
UserId
≈≈I O
,
≈≈O P
x
≈≈Q R
.
≈≈R S
LoginProvider
≈≈S `
,
≈≈` a
x
≈≈b c
.
≈≈c d
Name
≈≈d h
}
≈≈i j
)
≈≈j k
;
≈≈k l
table
∆∆ 
.
∆∆ 

ForeignKey
∆∆ $
(
∆∆$ %
name
«« 
:
«« 
$str
«« F
,
««F G
column
»» 
:
»» 
x
»»  !
=>
»»" $
x
»»% &
.
»»& '
UserId
»»' -
,
»»- .
principalTable
…… &
:
……& '
$str
……( 5
,
……5 6
principalColumn
   '
:
  ' (
$str
  ) -
,
  - .
onDelete
ÀÀ  
:
ÀÀ  !
ReferentialAction
ÀÀ" 3
.
ÀÀ3 4
Cascade
ÀÀ4 ;
)
ÀÀ; <
;
ÀÀ< =
}
ÃÃ 
)
ÃÃ 
;
ÃÃ 
migrationBuilder
ŒŒ 
.
ŒŒ 
CreateTable
ŒŒ (
(
ŒŒ( )
name
œœ 
:
œœ 
$str
œœ '
,
œœ' (
columns
–– 
:
–– 
table
–– 
=>
–– !
new
––" %
{
—— 
Id
““ 
=
““ 
table
““ 
.
““ 
Column
““ %
<
““% &
int
““& )
>
““) *
(
““* +
type
““+ /
:
““/ 0
$str
““1 6
,
““6 7
nullable
““8 @
:
““@ A
false
““B G
)
““G H
.
”” 

Annotation
”” #
(
””# $
$str
””$ 8
,
””8 9
$str
””: @
)
””@ A
,
””A B
FileName
‘‘ 
=
‘‘ 
table
‘‘ $
.
‘‘$ %
Column
‘‘% +
<
‘‘+ ,
string
‘‘, 2
>
‘‘2 3
(
‘‘3 4
type
‘‘4 8
:
‘‘8 9
$str
‘‘: I
,
‘‘I J
nullable
‘‘K S
:
‘‘S T
false
‘‘U Z
)
‘‘Z [
,
‘‘[ \

UploadedAt
’’ 
=
’’  
table
’’! &
.
’’& '
Column
’’' -
<
’’- .
DateTime
’’. 6
>
’’6 7
(
’’7 8
type
’’8 <
:
’’< =
$str
’’> I
,
’’I J
nullable
’’K S
:
’’S T
false
’’U Z
)
’’Z [
,
’’[ \
ClientId
÷÷ 
=
÷÷ 
table
÷÷ $
.
÷÷$ %
Column
÷÷% +
<
÷÷+ ,
int
÷÷, /
>
÷÷/ 0
(
÷÷0 1
type
÷÷1 5
:
÷÷5 6
$str
÷÷7 <
,
÷÷< =
nullable
÷÷> F
:
÷÷F G
false
÷÷H M
)
÷÷M N
,
÷÷N O
DocumentTypeId
◊◊ "
=
◊◊# $
table
◊◊% *
.
◊◊* +
Column
◊◊+ 1
<
◊◊1 2
int
◊◊2 5
>
◊◊5 6
(
◊◊6 7
type
◊◊7 ;
:
◊◊; <
$str
◊◊= B
,
◊◊B C
nullable
◊◊D L
:
◊◊L M
false
◊◊N S
)
◊◊S T
,
◊◊T U
IsSigned
ÿÿ 
=
ÿÿ 
table
ÿÿ $
.
ÿÿ$ %
Column
ÿÿ% +
<
ÿÿ+ ,
bool
ÿÿ, 0
>
ÿÿ0 1
(
ÿÿ1 2
type
ÿÿ2 6
:
ÿÿ6 7
$str
ÿÿ8 =
,
ÿÿ= >
nullable
ÿÿ? G
:
ÿÿG H
false
ÿÿI N
)
ÿÿN O
,
ÿÿO P
SignedAt
ŸŸ 
=
ŸŸ 
table
ŸŸ $
.
ŸŸ$ %
Column
ŸŸ% +
<
ŸŸ+ ,
DateTime
ŸŸ, 4
>
ŸŸ4 5
(
ŸŸ5 6
type
ŸŸ6 :
:
ŸŸ: ;
$str
ŸŸ< G
,
ŸŸG H
nullable
ŸŸI Q
:
ŸŸQ R
true
ŸŸS W
)
ŸŸW X
}
⁄⁄ 
,
⁄⁄ 
constraints
€€ 
:
€€ 
table
€€ "
=>
€€# %
{
‹‹ 
table
›› 
.
›› 

PrimaryKey
›› $
(
››$ %
$str
››% 9
,
››9 :
x
››; <
=>
››= ?
x
››@ A
.
››A B
Id
››B D
)
››D E
;
››E F
table
ﬁﬁ 
.
ﬁﬁ 

ForeignKey
ﬁﬁ $
(
ﬁﬁ$ %
name
ﬂﬂ 
:
ﬂﬂ 
$str
ﬂﬂ C
,
ﬂﬂC D
column
‡‡ 
:
‡‡ 
x
‡‡  !
=>
‡‡" $
x
‡‡% &
.
‡‡& '
ClientId
‡‡' /
,
‡‡/ 0
principalTable
·· &
:
··& '
$str
··( 1
,
··1 2
principalColumn
‚‚ '
:
‚‚' (
$str
‚‚) -
,
‚‚- .
onDelete
„„  
:
„„  !
ReferentialAction
„„" 3
.
„„3 4
Cascade
„„4 ;
)
„„; <
;
„„< =
table
‰‰ 
.
‰‰ 

ForeignKey
‰‰ $
(
‰‰$ %
name
ÂÂ 
:
ÂÂ 
$str
ÂÂ O
,
ÂÂO P
column
ÊÊ 
:
ÊÊ 
x
ÊÊ  !
=>
ÊÊ" $
x
ÊÊ% &
.
ÊÊ& '
DocumentTypeId
ÊÊ' 5
,
ÊÊ5 6
principalTable
ÁÁ &
:
ÁÁ& '
$str
ÁÁ( 7
,
ÁÁ7 8
principalColumn
ËË '
:
ËË' (
$str
ËË) -
,
ËË- .
onDelete
ÈÈ  
:
ÈÈ  !
ReferentialAction
ÈÈ" 3
.
ÈÈ3 4
Cascade
ÈÈ4 ;
)
ÈÈ; <
;
ÈÈ< =
}
ÍÍ 
)
ÍÍ 
;
ÍÍ 
migrationBuilder
ÏÏ 
.
ÏÏ 

InsertData
ÏÏ '
(
ÏÏ' (
table
ÌÌ 
:
ÌÌ 
$str
ÌÌ  
,
ÌÌ  !
columns
ÓÓ 
:
ÓÓ 
new
ÓÓ 
[
ÓÓ 
]
ÓÓ 
{
ÓÓ  
$str
ÓÓ! %
,
ÓÓ% &
$str
ÓÓ' .
,
ÓÓ. /
$str
ÓÓ0 6
}
ÓÓ7 8
,
ÓÓ8 9
values
ÔÔ 
:
ÔÔ 
new
ÔÔ 
object
ÔÔ "
[
ÔÔ" #
,
ÔÔ# $
]
ÔÔ$ %
{
 
{
ÒÒ 
$num
ÒÒ 
,
ÒÒ 
$str
ÒÒ ,
,
ÒÒ, -
$str
ÒÒ. =
}
ÒÒ> ?
,
ÒÒ? @
{
ÚÚ 
$num
ÚÚ 
,
ÚÚ 
$str
ÚÚ +
,
ÚÚ+ ,
$str
ÚÚ- :
}
ÚÚ; <
}
ÛÛ 
)
ÛÛ 
;
ÛÛ 
migrationBuilder
ıı 
.
ıı 

InsertData
ıı '
(
ıı' (
table
ˆˆ 
:
ˆˆ 
$str
ˆˆ &
,
ˆˆ& '
columns
˜˜ 
:
˜˜ 
new
˜˜ 
[
˜˜ 
]
˜˜ 
{
˜˜  
$str
˜˜! %
,
˜˜% &
$str
˜˜' 4
,
˜˜4 5
$str
˜˜6 <
}
˜˜= >
,
˜˜> ?
values
¯¯ 
:
¯¯ 
new
¯¯ 
object
¯¯ "
[
¯¯" #
,
¯¯# $
]
¯¯$ %
{
˘˘ 
{
˙˙ 
$num
˙˙ 
,
˙˙ 
$str
˙˙ 4
,
˙˙4 5
$str
˙˙6 ?
}
˙˙@ A
,
˙˙A B
{
˚˚ 
$num
˚˚ 
,
˚˚ 
$str
˚˚ /
,
˚˚/ 0
$str
˚˚1 6
}
˚˚7 8
}
¸¸ 
)
¸¸ 
;
¸¸ 
migrationBuilder
˛˛ 
.
˛˛ 

InsertData
˛˛ '
(
˛˛' (
table
ˇˇ 
:
ˇˇ 
$str
ˇˇ (
,
ˇˇ( )
columns
ÄÄ 
:
ÄÄ 
new
ÄÄ 
[
ÄÄ 
]
ÄÄ 
{
ÄÄ  
$str
ÄÄ! %
,
ÄÄ% &
$str
ÄÄ' 1
,
ÄÄ1 2
$str
ÄÄ3 C
,
ÄÄC D
$str
ÄÄE O
,
ÄÄO P
$str
ÄÄQ [
,
ÄÄ[ \
$str
ÄÄ] g
,
ÄÄg h
$str
ÄÄi u
}
ÄÄv w
,
ÄÄw x
values
ÅÅ 
:
ÅÅ 
new
ÅÅ 
object
ÅÅ "
[
ÅÅ" #
,
ÅÅ# $
]
ÅÅ$ %
{
ÇÇ 
{
ÉÉ 
$num
ÉÉ 
,
ÉÉ 
$num
ÉÉ 
,
ÉÉ 
$num
ÉÉ 
,
ÉÉ 
$str
ÉÉ 0
,
ÉÉ0 1
false
ÉÉ2 7
,
ÉÉ7 8
null
ÉÉ9 =
,
ÉÉ= >
new
ÉÉ? B
DateTime
ÉÉC K
(
ÉÉK L
$num
ÉÉL P
,
ÉÉP Q
$num
ÉÉR S
,
ÉÉS T
$num
ÉÉU V
,
ÉÉV W
$num
ÉÉX Z
,
ÉÉZ [
$num
ÉÉ\ ]
,
ÉÉ] ^
$num
ÉÉ_ `
,
ÉÉ` a
$num
ÉÉb c
,
ÉÉc d
DateTimeKind
ÉÉe q
.
ÉÉq r
Unspecified
ÉÉr }
)
ÉÉ} ~
}ÉÉ Ä
,ÉÉÄ Å
{
ÑÑ 
$num
ÑÑ 
,
ÑÑ 
$num
ÑÑ 
,
ÑÑ 
$num
ÑÑ 
,
ÑÑ 
$str
ÑÑ ,
,
ÑÑ, -
false
ÑÑ. 3
,
ÑÑ3 4
null
ÑÑ5 9
,
ÑÑ9 :
new
ÑÑ; >
DateTime
ÑÑ? G
(
ÑÑG H
$num
ÑÑH L
,
ÑÑL M
$num
ÑÑN O
,
ÑÑO P
$num
ÑÑQ R
,
ÑÑR S
$num
ÑÑT V
,
ÑÑV W
$num
ÑÑX Z
,
ÑÑZ [
$num
ÑÑ\ ]
,
ÑÑ] ^
$num
ÑÑ_ `
,
ÑÑ` a
DateTimeKind
ÑÑb n
.
ÑÑn o
Unspecified
ÑÑo z
)
ÑÑz {
}
ÑÑ| }
}
ÖÖ 
)
ÖÖ 
;
ÖÖ 
migrationBuilder
áá 
.
áá 
CreateIndex
áá (
(
áá( )
name
àà 
:
àà 
$str
àà 2
,
àà2 3
table
ââ 
:
ââ 
$str
ââ )
,
ââ) *
column
ää 
:
ää 
$str
ää  
)
ää  !
;
ää! "
migrationBuilder
åå 
.
åå 
CreateIndex
åå (
(
åå( )
name
çç 
:
çç 
$str
çç %
,
çç% &
table
éé 
:
éé 
$str
éé $
,
éé$ %
column
èè 
:
èè 
$str
èè (
,
èè( )
unique
êê 
:
êê 
true
êê 
,
êê 
filter
ëë 
:
ëë 
$str
ëë 6
)
ëë6 7
;
ëë7 8
migrationBuilder
ìì 
.
ìì 
CreateIndex
ìì (
(
ìì( )
name
îî 
:
îî 
$str
îî 2
,
îî2 3
table
ïï 
:
ïï 
$str
ïï )
,
ïï) *
column
ññ 
:
ññ 
$str
ññ  
)
ññ  !
;
ññ! "
migrationBuilder
òò 
.
òò 
CreateIndex
òò (
(
òò( )
name
ôô 
:
ôô 
$str
ôô 2
,
ôô2 3
table
öö 
:
öö 
$str
öö )
,
öö) *
column
õõ 
:
õõ 
$str
õõ  
)
õõ  !
;
õõ! "
migrationBuilder
ùù 
.
ùù 
CreateIndex
ùù (
(
ùù( )
name
ûû 
:
ûû 
$str
ûû 1
,
ûû1 2
table
üü 
:
üü 
$str
üü (
,
üü( )
column
†† 
:
†† 
$str
††  
)
††  !
;
††! "
migrationBuilder
¢¢ 
.
¢¢ 
CreateIndex
¢¢ (
(
¢¢( )
name
££ 
:
££ 
$str
££ "
,
££" #
table
§§ 
:
§§ 
$str
§§ $
,
§§$ %
column
•• 
:
•• 
$str
•• )
)
••) *
;
••* +
migrationBuilder
ßß 
.
ßß 
CreateIndex
ßß (
(
ßß( )
name
®® 
:
®® 
$str
®® %
,
®®% &
table
©© 
:
©© 
$str
©© $
,
©©$ %
column
™™ 
:
™™ 
$str
™™ ,
,
™™, -
unique
´´ 
:
´´ 
true
´´ 
,
´´ 
filter
¨¨ 
:
¨¨ 
$str
¨¨ :
)
¨¨: ;
;
¨¨; <
migrationBuilder
ÆÆ 
.
ÆÆ 
CreateIndex
ÆÆ (
(
ÆÆ( )
name
ØØ 
:
ØØ 
$str
ØØ 3
,
ØØ3 4
table
∞∞ 
:
∞∞ 
$str
∞∞ (
,
∞∞( )
column
±± 
:
±± 
$str
±± "
)
±±" #
;
±±# $
migrationBuilder
≥≥ 
.
≥≥ 
CreateIndex
≥≥ (
(
≥≥( )
name
¥¥ 
:
¥¥ 
$str
¥¥ 9
,
¥¥9 :
table
µµ 
:
µµ 
$str
µµ (
,
µµ( )
column
∂∂ 
:
∂∂ 
$str
∂∂ (
)
∂∂( )
;
∂∂) *
}
∑∑ 	
	protected
∫∫ 
override
∫∫ 
void
∫∫ 
Down
∫∫  $
(
∫∫$ %
MigrationBuilder
∫∫% 5
migrationBuilder
∫∫6 F
)
∫∫F G
{
ªª 	
migrationBuilder
ºº 
.
ºº 
	DropTable
ºº &
(
ºº& '
name
ΩΩ 
:
ΩΩ 
$str
ΩΩ (
)
ΩΩ( )
;
ΩΩ) *
migrationBuilder
øø 
.
øø 
	DropTable
øø &
(
øø& '
name
¿¿ 
:
¿¿ 
$str
¿¿ (
)
¿¿( )
;
¿¿) *
migrationBuilder
¬¬ 
.
¬¬ 
	DropTable
¬¬ &
(
¬¬& '
name
√√ 
:
√√ 
$str
√√ (
)
√√( )
;
√√) *
migrationBuilder
≈≈ 
.
≈≈ 
	DropTable
≈≈ &
(
≈≈& '
name
∆∆ 
:
∆∆ 
$str
∆∆ '
)
∆∆' (
;
∆∆( )
migrationBuilder
»» 
.
»» 
	DropTable
»» &
(
»»& '
name
…… 
:
…… 
$str
…… (
)
……( )
;
……) *
migrationBuilder
ÀÀ 
.
ÀÀ 
	DropTable
ÀÀ &
(
ÀÀ& '
name
ÃÃ 
:
ÃÃ 
$str
ÃÃ 
)
ÃÃ 
;
ÃÃ 
migrationBuilder
ŒŒ 
.
ŒŒ 
	DropTable
ŒŒ &
(
ŒŒ& '
name
œœ 
:
œœ 
$str
œœ '
)
œœ' (
;
œœ( )
migrationBuilder
—— 
.
—— 
	DropTable
—— &
(
——& '
name
““ 
:
““ 
$str
““ #
)
““# $
;
““$ %
migrationBuilder
‘‘ 
.
‘‘ 
	DropTable
‘‘ &
(
‘‘& '
name
’’ 
:
’’ 
$str
’’ #
)
’’# $
;
’’$ %
migrationBuilder
◊◊ 
.
◊◊ 
	DropTable
◊◊ &
(
◊◊& '
name
ÿÿ 
:
ÿÿ 
$str
ÿÿ 
)
ÿÿ  
;
ÿÿ  !
migrationBuilder
⁄⁄ 
.
⁄⁄ 
	DropTable
⁄⁄ &
(
⁄⁄& '
name
€€ 
:
€€ 
$str
€€ %
)
€€% &
;
€€& '
}
‹‹ 	
}
›› 
}ﬁﬁ €
gC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Migrations\20251119191725_AddSignedStatus.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 

Migrations "
{ 
public		 

partial		 
class		 
AddSignedStatus		 (
:		) *
	Migration		+ 4
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
bool' +
>+ ,
(, -
name 
: 
$str  
,  !
table 
: 
$str (
,( )
type 
: 
$str 
,  
nullable 
: 
false 
,  
defaultValue 
: 
false #
)# $
;$ %
migrationBuilder 
. 
	AddColumn &
<& '
DateTime' /
>/ 0
(0 1
name 
: 
$str  
,  !
table 
: 
$str (
,( )
type 
: 
$str 
, 
nullable 
: 
true 
) 
;  
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str (
,( )
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
columns 
: 
new 
[ 
] 
{  
$str! +
,+ ,
$str- 7
}8 9
,9 :
values   
:   
new   
object   "
[  " #
]  # $
{  % &
false  ' ,
,  , -
null  . 2
}  3 4
)  4 5
;  5 6
migrationBuilder"" 
."" 

UpdateData"" '
(""' (
table## 
:## 
$str## (
,##( )
	keyColumn$$ 
:$$ 
$str$$ 
,$$  
keyValue%% 
:%% 
$num%% 
,%% 
columns&& 
:&& 
new&& 
[&& 
]&& 
{&&  
$str&&! +
,&&+ ,
$str&&- 7
}&&8 9
,&&9 :
values'' 
:'' 
new'' 
object'' "
[''" #
]''# $
{''% &
false''' ,
,'', -
null''. 2
}''3 4
)''4 5
;''5 6
}(( 	
	protected++ 
override++ 
void++ 
Down++  $
(++$ %
MigrationBuilder++% 5
migrationBuilder++6 F
)++F G
{,, 	
migrationBuilder-- 
.-- 

DropColumn-- '
(--' (
name.. 
:.. 
$str..  
,..  !
table// 
:// 
$str// (
)//( )
;//) *
migrationBuilder11 
.11 

DropColumn11 '
(11' (
name22 
:22 
$str22  
,22  !
table33 
:33 
$str33 (
)33( )
;33) *
}44 	
}55 
}66 ç 
cC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Migrations\20251119173553_FixSeedData.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 

Migrations "
{ 
public		 

partial		 
class		 
FixSeedData		 $
:		% &
	Migration		' 0
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str (
,( )
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column 
: 
$str $
,$ %
value 
: 
new 
DateTime #
(# $
$num$ (
,( )
$num* +
,+ ,
$num- .
,. /
$num0 2
,2 3
$num4 5
,5 6
$num7 8
,8 9
$num: ;
,; <
DateTimeKind= I
.I J
UnspecifiedJ U
)U V
)V W
;W X
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str (
,( )
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column 
: 
$str $
,$ %
value 
: 
new 
DateTime #
(# $
$num$ (
,( )
$num* +
,+ ,
$num- .
,. /
$num0 2
,2 3
$num4 6
,6 7
$num8 9
,9 :
$num; <
,< =
DateTimeKind> J
.J K
UnspecifiedK V
)V W
)W X
;X Y
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder   
.   

UpdateData   '
(  ' (
table!! 
:!! 
$str!! (
,!!( )
	keyColumn"" 
:"" 
$str"" 
,""  
keyValue## 
:## 
$num## 
,## 
column$$ 
:$$ 
$str$$ $
,$$$ %
value%% 
:%% 
new%% 
DateTime%% #
(%%# $
$num%%$ (
,%%( )
$num%%* ,
,%%, -
$num%%. 0
,%%0 1
$num%%2 4
,%%4 5
$num%%6 8
,%%8 9
$num%%: <
,%%< =
$num%%> A
,%%A B
DateTimeKind%%C O
.%%O P
Utc%%P S
)%%S T
.%%T U
AddTicks%%U ]
(%%] ^
$num%%^ b
)%%b c
)%%c d
;%%d e
migrationBuilder'' 
.'' 

UpdateData'' '
(''' (
table(( 
:(( 
$str(( (
,((( )
	keyColumn)) 
:)) 
$str)) 
,))  
keyValue** 
:** 
$num** 
,** 
column++ 
:++ 
$str++ $
,++$ %
value,, 
:,, 
new,, 
DateTime,, #
(,,# $
$num,,$ (
,,,( )
$num,,* ,
,,,, -
$num,,. 0
,,,0 1
$num,,2 4
,,,4 5
$num,,6 8
,,,8 9
$num,,: <
,,,< =
$num,,> A
,,,A B
DateTimeKind,,C O
.,,O P
Utc,,P S
),,S T
.,,T U
AddTicks,,U ]
(,,] ^
$num,,^ b
),,b c
),,c d
;,,d e
}-- 	
}.. 
}// Œ]
dC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Migrations\20251119173133_AddOrmTables.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 

Migrations "
{		 
public 

partial 
class 
AddOrmTables %
:& '
	Migration( 1
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
,  
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 :
,: ;
nullable< D
:D E
falseF K
)K L
. 

Annotation #
(# $
$str$ :
,: ;
true< @
)@ A
,A B
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 <
,< =
nullable> F
:F G
falseH M
)M N
,N O
Email 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 =
,= >
nullable? G
:G H
falseI N
)N O
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 1
,1 2
x3 4
=>5 7
x8 9
.9 :
Id: <
)< =
;= >
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str %
,% &
columns   
:   
table   
=>   !
new  " %
{!! 
Id"" 
="" 
table"" 
."" 
Column"" %
<""% &
int""& )
>"") *
(""* +
type""+ /
:""/ 0
$str""1 :
,"": ;
nullable""< D
:""D E
false""F K
)""K L
.## 

Annotation## #
(### $
$str##$ :
,##: ;
true##< @
)##@ A
,##A B
Name$$ 
=$$ 
table$$  
.$$  !
Column$$! '
<$$' (
string$$( .
>$$. /
($$/ 0
type$$0 4
:$$4 5
$str$$6 <
,$$< =
nullable$$> F
:$$F G
false$$H M
)$$M N
,$$N O
Description%% 
=%%  !
table%%" '
.%%' (
Column%%( .
<%%. /
string%%/ 5
>%%5 6
(%%6 7
type%%7 ;
:%%; <
$str%%= C
,%%C D
nullable%%E M
:%%M N
true%%O S
)%%S T
}&& 
,&& 
constraints'' 
:'' 
table'' "
=>''# %
{(( 
table)) 
.)) 

PrimaryKey)) $
())$ %
$str))% 7
,))7 8
x))9 :
=>)); =
x))> ?
.))? @
Id))@ B
)))B C
;))C D
}** 
)** 
;** 
migrationBuilder,, 
.,, 
CreateTable,, (
(,,( )
name-- 
:-- 
$str-- '
,--' (
columns.. 
:.. 
table.. 
=>.. !
new.." %
{// 
Id00 
=00 
table00 
.00 
Column00 %
<00% &
int00& )
>00) *
(00* +
type00+ /
:00/ 0
$str001 :
,00: ;
nullable00< D
:00D E
false00F K
)00K L
.11 

Annotation11 #
(11# $
$str11$ :
,11: ;
true11< @
)11@ A
,11A B
FileName22 
=22 
table22 $
.22$ %
Column22% +
<22+ ,
string22, 2
>222 3
(223 4
type224 8
:228 9
$str22: @
,22@ A
nullable22B J
:22J K
false22L Q
)22Q R
,22R S

UploadedAt33 
=33  
table33! &
.33& '
Column33' -
<33- .
DateTime33. 6
>336 7
(337 8
type338 <
:33< =
$str33> D
,33D E
nullable33F N
:33N O
false33P U
)33U V
,33V W
ClientId44 
=44 
table44 $
.44$ %
Column44% +
<44+ ,
int44, /
>44/ 0
(440 1
type441 5
:445 6
$str447 @
,44@ A
nullable44B J
:44J K
false44L Q
)44Q R
,44R S
DocumentTypeId55 "
=55# $
table55% *
.55* +
Column55+ 1
<551 2
int552 5
>555 6
(556 7
type557 ;
:55; <
$str55= F
,55F G
nullable55H P
:55P Q
false55R W
)55W X
}66 
,66 
constraints77 
:77 
table77 "
=>77# %
{88 
table99 
.99 

PrimaryKey99 $
(99$ %
$str99% 9
,999 :
x99; <
=>99= ?
x99@ A
.99A B
Id99B D
)99D E
;99E F
table:: 
.:: 

ForeignKey:: $
(::$ %
name;; 
:;; 
$str;; C
,;;C D
column<< 
:<< 
x<<  !
=><<" $
x<<% &
.<<& '
ClientId<<' /
,<</ 0
principalTable== &
:==& '
$str==( 1
,==1 2
principalColumn>> '
:>>' (
$str>>) -
,>>- .
onDelete??  
:??  !
ReferentialAction??" 3
.??3 4
Cascade??4 ;
)??; <
;??< =
table@@ 
.@@ 

ForeignKey@@ $
(@@$ %
nameAA 
:AA 
$strAA O
,AAO P
columnBB 
:BB 
xBB  !
=>BB" $
xBB% &
.BB& '
DocumentTypeIdBB' 5
,BB5 6
principalTableCC &
:CC& '
$strCC( 7
,CC7 8
principalColumnDD '
:DD' (
$strDD) -
,DD- .
onDeleteEE  
:EE  !
ReferentialActionEE" 3
.EE3 4
CascadeEE4 ;
)EE; <
;EE< =
}FF 
)FF 
;FF 
migrationBuilderHH 
.HH 

InsertDataHH '
(HH' (
tableII 
:II 
$strII  
,II  !
columnsJJ 
:JJ 
newJJ 
[JJ 
]JJ 
{JJ  
$strJJ! %
,JJ% &
$strJJ' .
,JJ. /
$strJJ0 6
}JJ7 8
,JJ8 9
valuesKK 
:KK 
newKK 
objectKK "
[KK" #
,KK# $
]KK$ %
{LL 
{MM 
$numMM 
,MM 
$strMM ,
,MM, -
$strMM. =
}MM> ?
,MM? @
{NN 
$numNN 
,NN 
$strNN +
,NN+ ,
$strNN- :
}NN; <
}OO 
)OO 
;OO 
migrationBuilderQQ 
.QQ 

InsertDataQQ '
(QQ' (
tableRR 
:RR 
$strRR &
,RR& '
columnsSS 
:SS 
newSS 
[SS 
]SS 
{SS  
$strSS! %
,SS% &
$strSS' 4
,SS4 5
$strSS6 <
}SS= >
,SS> ?
valuesTT 
:TT 
newTT 
objectTT "
[TT" #
,TT# $
]TT$ %
{UU 
{VV 
$numVV 
,VV 
$strVV 4
,VV4 5
$strVV6 ?
}VV@ A
,VVA B
{WW 
$numWW 
,WW 
$strWW /
,WW/ 0
$strWW1 6
}WW7 8
}XX 
)XX 
;XX 
migrationBuilderZZ 
.ZZ 

InsertDataZZ '
(ZZ' (
table[[ 
:[[ 
$str[[ (
,[[( )
columns\\ 
:\\ 
new\\ 
[\\ 
]\\ 
{\\  
$str\\! %
,\\% &
$str\\' 1
,\\1 2
$str\\3 C
,\\C D
$str\\E O
,\\O P
$str\\Q ]
}\\^ _
,\\_ `
values]] 
:]] 
new]] 
object]] "
[]]" #
,]]# $
]]]$ %
{^^ 
{__ 
$num__ 
,__ 
$num__ 
,__ 
$num__ 
,__ 
$str__ 0
,__0 1
new__2 5
DateTime__6 >
(__> ?
$num__? C
,__C D
$num__E G
,__G H
$num__I K
,__K L
$num__M O
,__O P
$num__Q S
,__S T
$num__U W
,__W X
$num__Y \
,__\ ]
DateTimeKind__^ j
.__j k
Utc__k n
)__n o
.__o p
AddTicks__p x
(__x y
$num__y }
)__} ~
}	__ Ä
,
__Ä Å
{`` 
$num`` 
,`` 
$num`` 
,`` 
$num`` 
,`` 
$str`` ,
,``, -
new``. 1
DateTime``2 :
(``: ;
$num``; ?
,``? @
$num``A C
,``C D
$num``E G
,``G H
$num``I K
,``K L
$num``M O
,``O P
$num``Q S
,``S T
$num``U X
,``X Y
DateTimeKind``Z f
.``f g
Utc``g j
)``j k
.``k l
AddTicks``l t
(``t u
$num``u y
)``y z
}``{ |
}aa 
)aa 
;aa 
migrationBuildercc 
.cc 
CreateIndexcc (
(cc( )
namedd 
:dd 
$strdd 3
,dd3 4
tableee 
:ee 
$stree (
,ee( )
columnff 
:ff 
$strff "
)ff" #
;ff# $
migrationBuilderhh 
.hh 
CreateIndexhh (
(hh( )
nameii 
:ii 
$strii 9
,ii9 :
tablejj 
:jj 
$strjj (
,jj( )
columnkk 
:kk 
$strkk (
)kk( )
;kk) *
}ll 	
	protectedoo 
overrideoo 
voidoo 
Downoo  $
(oo$ %
MigrationBuilderoo% 5
migrationBuilderoo6 F
)ooF G
{pp 	
migrationBuilderqq 
.qq 
	DropTableqq &
(qq& '
namerr 
:rr 
$strrr '
)rr' (
;rr( )
migrationBuildertt 
.tt 
	DropTablett &
(tt& '
nameuu 
:uu 
$struu 
)uu  
;uu  !
migrationBuilderww 
.ww 
	DropTableww &
(ww& '
namexx 
:xx 
$strxx %
)xx% &
;xx& '
}yy 	
}zz 
}{{ Ò
iC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Migrations\20251108174214_UpdateFileStorage.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 

Migrations "
{ 
public		 

partial		 
class		 
UpdateFileStorage		 *
:		+ ,
	Migration		- 6
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
Guid& *
>* +
(+ ,
type, 0
:0 1
$str2 8
,8 9
nullable: B
:B C
falseD I
)I J
,J K
FileName 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: @
,@ A
nullableB J
:J K
falseL Q
)Q R
,R S
FilePath 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: @
,@ A
nullableB J
:J K
falseL Q
)Q R
,R S
SignatureBase64 #
=$ %
table& +
.+ ,
Column, 2
<2 3
string3 9
>9 :
(: ;
type; ?
:? @
$strA G
,G H
nullableI Q
:Q R
trueS W
)W X
,X Y
PublicKeyPem  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
type8 <
:< =
$str> D
,D E
nullableF N
:N O
trueP T
)T U
,U V

UploadedAt 
=  
table! &
.& '
Column' -
<- .
DateTime. 6
>6 7
(7 8
type8 <
:< =
$str> D
,D E
nullableF N
:N O
falseP U
)U V
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% /
,/ 0
x1 2
=>3 5
x6 7
.7 8
Id8 :
): ;
;; <
} 
) 
; 
} 	
	protected   
override   
void   
Down    $
(  $ %
MigrationBuilder  % 5
migrationBuilder  6 F
)  F G
{!! 	
migrationBuilder"" 
."" 
	DropTable"" &
(""& '
name## 
:## 
$str## 
)## 
;## 
}$$ 	
}%% 
}&& Ú«
dC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Migrations\20251108155151_InitIdentity.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 

Migrations "
{ 
public		 

partial		 
class		 
InitIdentity		 %
:		& '
	Migration		( 1
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
type. 2
:2 3
$str4 :
,: ;
nullable< D
:D E
falseF K
)K L
,L M
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 <
,< =
	maxLength> G
:G H
$numI L
,L M
nullableN V
:V W
trueX \
)\ ]
,] ^
NormalizedName "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
type: >
:> ?
$str@ F
,F G
	maxLengthH Q
:Q R
$numS V
,V W
nullableX `
:` a
trueb f
)f g
,g h
ConcurrencyStamp $
=% &
table' ,
., -
Column- 3
<3 4
string4 :
>: ;
(; <
type< @
:@ A
$strB H
,H I
nullableJ R
:R S
trueT X
)X Y
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id   
=   
table   
.   
Column   %
<  % &
string  & ,
>  , -
(  - .
type  . 2
:  2 3
$str  4 :
,  : ;
nullable  < D
:  D E
false  F K
)  K L
,  L M
FullName!! 
=!! 
table!! $
.!!$ %
Column!!% +
<!!+ ,
string!!, 2
>!!2 3
(!!3 4
type!!4 8
:!!8 9
$str!!: @
,!!@ A
	maxLength!!B K
:!!K L
$num!!M P
,!!P Q
nullable!!R Z
:!!Z [
true!!\ `
)!!` a
,!!a b
UserName"" 
="" 
table"" $
.""$ %
Column""% +
<""+ ,
string"", 2
>""2 3
(""3 4
type""4 8
:""8 9
$str"": @
,""@ A
	maxLength""B K
:""K L
$num""M P
,""P Q
nullable""R Z
:""Z [
true""\ `
)""` a
,""a b
NormalizedUserName## &
=##' (
table##) .
.##. /
Column##/ 5
<##5 6
string##6 <
>##< =
(##= >
type##> B
:##B C
$str##D J
,##J K
	maxLength##L U
:##U V
$num##W Z
,##Z [
nullable##\ d
:##d e
true##f j
)##j k
,##k l
Email$$ 
=$$ 
table$$ !
.$$! "
Column$$" (
<$$( )
string$$) /
>$$/ 0
($$0 1
type$$1 5
:$$5 6
$str$$7 =
,$$= >
	maxLength$$? H
:$$H I
$num$$J M
,$$M N
nullable$$O W
:$$W X
true$$Y ]
)$$] ^
,$$^ _
NormalizedEmail%% #
=%%$ %
table%%& +
.%%+ ,
Column%%, 2
<%%2 3
string%%3 9
>%%9 :
(%%: ;
type%%; ?
:%%? @
$str%%A G
,%%G H
	maxLength%%I R
:%%R S
$num%%T W
,%%W X
nullable%%Y a
:%%a b
true%%c g
)%%g h
,%%h i
EmailConfirmed&& "
=&&# $
table&&% *
.&&* +
Column&&+ 1
<&&1 2
bool&&2 6
>&&6 7
(&&7 8
type&&8 <
:&&< =
$str&&> G
,&&G H
nullable&&I Q
:&&Q R
false&&S X
)&&X Y
,&&Y Z
PasswordHash''  
=''! "
table''# (
.''( )
Column'') /
<''/ 0
string''0 6
>''6 7
(''7 8
type''8 <
:''< =
$str''> D
,''D E
nullable''F N
:''N O
true''P T
)''T U
,''U V
SecurityStamp(( !
=((" #
table(($ )
.(() *
Column((* 0
<((0 1
string((1 7
>((7 8
(((8 9
type((9 =
:((= >
$str((? E
,((E F
nullable((G O
:((O P
true((Q U
)((U V
,((V W
ConcurrencyStamp)) $
=))% &
table))' ,
.)), -
Column))- 3
<))3 4
string))4 :
>)): ;
()); <
type))< @
:))@ A
$str))B H
,))H I
nullable))J R
:))R S
true))T X
)))X Y
,))Y Z
PhoneNumber** 
=**  !
table**" '
.**' (
Column**( .
<**. /
string**/ 5
>**5 6
(**6 7
type**7 ;
:**; <
$str**= C
,**C D
nullable**E M
:**M N
true**O S
)**S T
,**T U 
PhoneNumberConfirmed++ (
=++) *
table+++ 0
.++0 1
Column++1 7
<++7 8
bool++8 <
>++< =
(++= >
type++> B
:++B C
$str++D M
,++M N
nullable++O W
:++W X
false++Y ^
)++^ _
,++_ `
TwoFactorEnabled,, $
=,,% &
table,,' ,
.,,, -
Column,,- 3
<,,3 4
bool,,4 8
>,,8 9
(,,9 :
type,,: >
:,,> ?
$str,,@ I
,,,I J
nullable,,K S
:,,S T
false,,U Z
),,Z [
,,,[ \

LockoutEnd-- 
=--  
table--! &
.--& '
Column--' -
<--- .
DateTimeOffset--. <
>--< =
(--= >
type--> B
:--B C
$str--D J
,--J K
nullable--L T
:--T U
true--V Z
)--Z [
,--[ \
LockoutEnabled.. "
=..# $
table..% *
...* +
Column..+ 1
<..1 2
bool..2 6
>..6 7
(..7 8
type..8 <
:..< =
$str..> G
,..G H
nullable..I Q
:..Q R
false..S X
)..X Y
,..Y Z
AccessFailedCount// %
=//& '
table//( -
.//- .
Column//. 4
<//4 5
int//5 8
>//8 9
(//9 :
type//: >
://> ?
$str//@ I
,//I J
nullable//K S
://S T
false//U Z
)//Z [
}00 
,00 
constraints11 
:11 
table11 "
=>11# %
{22 
table33 
.33 

PrimaryKey33 $
(33$ %
$str33% 5
,335 6
x337 8
=>339 ;
x33< =
.33= >
Id33> @
)33@ A
;33A B
}44 
)44 
;44 
migrationBuilder66 
.66 
CreateTable66 (
(66( )
name77 
:77 
$str77 (
,77( )
columns88 
:88 
table88 
=>88 !
new88" %
{99 
Id:: 
=:: 
table:: 
.:: 
Column:: %
<::% &
int::& )
>::) *
(::* +
type::+ /
:::/ 0
$str::1 :
,::: ;
nullable::< D
:::D E
false::F K
)::K L
.;; 

Annotation;; #
(;;# $
$str;;$ :
,;;: ;
true;;< @
);;@ A
,;;A B
RoleId<< 
=<< 
table<< "
.<<" #
Column<<# )
<<<) *
string<<* 0
><<0 1
(<<1 2
type<<2 6
:<<6 7
$str<<8 >
,<<> ?
nullable<<@ H
:<<H I
false<<J O
)<<O P
,<<P Q
	ClaimType== 
=== 
table==  %
.==% &
Column==& ,
<==, -
string==- 3
>==3 4
(==4 5
type==5 9
:==9 :
$str==; A
,==A B
nullable==C K
:==K L
true==M Q
)==Q R
,==R S

ClaimValue>> 
=>>  
table>>! &
.>>& '
Column>>' -
<>>- .
string>>. 4
>>>4 5
(>>5 6
type>>6 :
:>>: ;
$str>>< B
,>>B C
nullable>>D L
:>>L M
true>>N R
)>>R S
}?? 
,?? 
constraints@@ 
:@@ 
table@@ "
=>@@# %
{AA 
tableBB 
.BB 

PrimaryKeyBB $
(BB$ %
$strBB% :
,BB: ;
xBB< =
=>BB> @
xBBA B
.BBB C
IdBBC E
)BBE F
;BBF G
tableCC 
.CC 

ForeignKeyCC $
(CC$ %
nameDD 
:DD 
$strDD F
,DDF G
columnEE 
:EE 
xEE  !
=>EE" $
xEE% &
.EE& '
RoleIdEE' -
,EE- .
principalTableFF &
:FF& '
$strFF( 5
,FF5 6
principalColumnGG '
:GG' (
$strGG) -
,GG- .
onDeleteHH  
:HH  !
ReferentialActionHH" 3
.HH3 4
CascadeHH4 ;
)HH; <
;HH< =
}II 
)II 
;II 
migrationBuilderKK 
.KK 
CreateTableKK (
(KK( )
nameLL 
:LL 
$strLL (
,LL( )
columnsMM 
:MM 
tableMM 
=>MM !
newMM" %
{NN 
IdOO 
=OO 
tableOO 
.OO 
ColumnOO %
<OO% &
intOO& )
>OO) *
(OO* +
typeOO+ /
:OO/ 0
$strOO1 :
,OO: ;
nullableOO< D
:OOD E
falseOOF K
)OOK L
.PP 

AnnotationPP #
(PP# $
$strPP$ :
,PP: ;
truePP< @
)PP@ A
,PPA B
UserIdQQ 
=QQ 
tableQQ "
.QQ" #
ColumnQQ# )
<QQ) *
stringQQ* 0
>QQ0 1
(QQ1 2
typeQQ2 6
:QQ6 7
$strQQ8 >
,QQ> ?
nullableQQ@ H
:QQH I
falseQQJ O
)QQO P
,QQP Q
	ClaimTypeRR 
=RR 
tableRR  %
.RR% &
ColumnRR& ,
<RR, -
stringRR- 3
>RR3 4
(RR4 5
typeRR5 9
:RR9 :
$strRR; A
,RRA B
nullableRRC K
:RRK L
trueRRM Q
)RRQ R
,RRR S

ClaimValueSS 
=SS  
tableSS! &
.SS& '
ColumnSS' -
<SS- .
stringSS. 4
>SS4 5
(SS5 6
typeSS6 :
:SS: ;
$strSS< B
,SSB C
nullableSSD L
:SSL M
trueSSN R
)SSR S
}TT 
,TT 
constraintsUU 
:UU 
tableUU "
=>UU# %
{VV 
tableWW 
.WW 

PrimaryKeyWW $
(WW$ %
$strWW% :
,WW: ;
xWW< =
=>WW> @
xWWA B
.WWB C
IdWWC E
)WWE F
;WWF G
tableXX 
.XX 

ForeignKeyXX $
(XX$ %
nameYY 
:YY 
$strYY F
,YYF G
columnZZ 
:ZZ 
xZZ  !
=>ZZ" $
xZZ% &
.ZZ& '
UserIdZZ' -
,ZZ- .
principalTable[[ &
:[[& '
$str[[( 5
,[[5 6
principalColumn\\ '
:\\' (
$str\\) -
,\\- .
onDelete]]  
:]]  !
ReferentialAction]]" 3
.]]3 4
Cascade]]4 ;
)]]; <
;]]< =
}^^ 
)^^ 
;^^ 
migrationBuilder`` 
.`` 
CreateTable`` (
(``( )
nameaa 
:aa 
$straa (
,aa( )
columnsbb 
:bb 
tablebb 
=>bb !
newbb" %
{cc 
LoginProviderdd !
=dd" #
tabledd$ )
.dd) *
Columndd* 0
<dd0 1
stringdd1 7
>dd7 8
(dd8 9
typedd9 =
:dd= >
$strdd? E
,ddE F
nullableddG O
:ddO P
falseddQ V
)ddV W
,ddW X
ProviderKeyee 
=ee  !
tableee" '
.ee' (
Columnee( .
<ee. /
stringee/ 5
>ee5 6
(ee6 7
typeee7 ;
:ee; <
$stree= C
,eeC D
nullableeeE M
:eeM N
falseeeO T
)eeT U
,eeU V
ProviderDisplayNameff '
=ff( )
tableff* /
.ff/ 0
Columnff0 6
<ff6 7
stringff7 =
>ff= >
(ff> ?
typeff? C
:ffC D
$strffE K
,ffK L
nullableffM U
:ffU V
trueffW [
)ff[ \
,ff\ ]
UserIdgg 
=gg 
tablegg "
.gg" #
Columngg# )
<gg) *
stringgg* 0
>gg0 1
(gg1 2
typegg2 6
:gg6 7
$strgg8 >
,gg> ?
nullablegg@ H
:ggH I
falseggJ O
)ggO P
}hh 
,hh 
constraintsii 
:ii 
tableii "
=>ii# %
{jj 
tablekk 
.kk 

PrimaryKeykk $
(kk$ %
$strkk% :
,kk: ;
xkk< =
=>kk> @
newkkA D
{kkE F
xkkG H
.kkH I
LoginProviderkkI V
,kkV W
xkkX Y
.kkY Z
ProviderKeykkZ e
}kkf g
)kkg h
;kkh i
tablell 
.ll 

ForeignKeyll $
(ll$ %
namemm 
:mm 
$strmm F
,mmF G
columnnn 
:nn 
xnn  !
=>nn" $
xnn% &
.nn& '
UserIdnn' -
,nn- .
principalTableoo &
:oo& '
$stroo( 5
,oo5 6
principalColumnpp '
:pp' (
$strpp) -
,pp- .
onDeleteqq  
:qq  !
ReferentialActionqq" 3
.qq3 4
Cascadeqq4 ;
)qq; <
;qq< =
}rr 
)rr 
;rr 
migrationBuildertt 
.tt 
CreateTablett (
(tt( )
nameuu 
:uu 
$struu '
,uu' (
columnsvv 
:vv 
tablevv 
=>vv !
newvv" %
{ww 
UserIdxx 
=xx 
tablexx "
.xx" #
Columnxx# )
<xx) *
stringxx* 0
>xx0 1
(xx1 2
typexx2 6
:xx6 7
$strxx8 >
,xx> ?
nullablexx@ H
:xxH I
falsexxJ O
)xxO P
,xxP Q
RoleIdyy 
=yy 
tableyy "
.yy" #
Columnyy# )
<yy) *
stringyy* 0
>yy0 1
(yy1 2
typeyy2 6
:yy6 7
$stryy8 >
,yy> ?
nullableyy@ H
:yyH I
falseyyJ O
)yyO P
}zz 
,zz 
constraints{{ 
:{{ 
table{{ "
=>{{# %
{|| 
table}} 
.}} 

PrimaryKey}} $
(}}$ %
$str}}% 9
,}}9 :
x}}; <
=>}}= ?
new}}@ C
{}}D E
x}}F G
.}}G H
UserId}}H N
,}}N O
x}}P Q
.}}Q R
RoleId}}R X
}}}Y Z
)}}Z [
;}}[ \
table~~ 
.~~ 

ForeignKey~~ $
(~~$ %
name 
: 
$str E
,E F
column
ÄÄ 
:
ÄÄ 
x
ÄÄ  !
=>
ÄÄ" $
x
ÄÄ% &
.
ÄÄ& '
RoleId
ÄÄ' -
,
ÄÄ- .
principalTable
ÅÅ &
:
ÅÅ& '
$str
ÅÅ( 5
,
ÅÅ5 6
principalColumn
ÇÇ '
:
ÇÇ' (
$str
ÇÇ) -
,
ÇÇ- .
onDelete
ÉÉ  
:
ÉÉ  !
ReferentialAction
ÉÉ" 3
.
ÉÉ3 4
Cascade
ÉÉ4 ;
)
ÉÉ; <
;
ÉÉ< =
table
ÑÑ 
.
ÑÑ 

ForeignKey
ÑÑ $
(
ÑÑ$ %
name
ÖÖ 
:
ÖÖ 
$str
ÖÖ E
,
ÖÖE F
column
ÜÜ 
:
ÜÜ 
x
ÜÜ  !
=>
ÜÜ" $
x
ÜÜ% &
.
ÜÜ& '
UserId
ÜÜ' -
,
ÜÜ- .
principalTable
áá &
:
áá& '
$str
áá( 5
,
áá5 6
principalColumn
àà '
:
àà' (
$str
àà) -
,
àà- .
onDelete
ââ  
:
ââ  !
ReferentialAction
ââ" 3
.
ââ3 4
Cascade
ââ4 ;
)
ââ; <
;
ââ< =
}
ää 
)
ää 
;
ää 
migrationBuilder
åå 
.
åå 
CreateTable
åå (
(
åå( )
name
çç 
:
çç 
$str
çç (
,
çç( )
columns
éé 
:
éé 
table
éé 
=>
éé !
new
éé" %
{
èè 
UserId
êê 
=
êê 
table
êê "
.
êê" #
Column
êê# )
<
êê) *
string
êê* 0
>
êê0 1
(
êê1 2
type
êê2 6
:
êê6 7
$str
êê8 >
,
êê> ?
nullable
êê@ H
:
êêH I
false
êêJ O
)
êêO P
,
êêP Q
LoginProvider
ëë !
=
ëë" #
table
ëë$ )
.
ëë) *
Column
ëë* 0
<
ëë0 1
string
ëë1 7
>
ëë7 8
(
ëë8 9
type
ëë9 =
:
ëë= >
$str
ëë? E
,
ëëE F
nullable
ëëG O
:
ëëO P
false
ëëQ V
)
ëëV W
,
ëëW X
Name
íí 
=
íí 
table
íí  
.
íí  !
Column
íí! '
<
íí' (
string
íí( .
>
íí. /
(
íí/ 0
type
íí0 4
:
íí4 5
$str
íí6 <
,
íí< =
nullable
íí> F
:
ííF G
false
ííH M
)
ííM N
,
ííN O
Value
ìì 
=
ìì 
table
ìì !
.
ìì! "
Column
ìì" (
<
ìì( )
string
ìì) /
>
ìì/ 0
(
ìì0 1
type
ìì1 5
:
ìì5 6
$str
ìì7 =
,
ìì= >
nullable
ìì? G
:
ììG H
true
ììI M
)
ììM N
}
îî 
,
îî 
constraints
ïï 
:
ïï 
table
ïï "
=>
ïï# %
{
ññ 
table
óó 
.
óó 

PrimaryKey
óó $
(
óó$ %
$str
óó% :
,
óó: ;
x
óó< =
=>
óó> @
new
óóA D
{
óóE F
x
óóG H
.
óóH I
UserId
óóI O
,
óóO P
x
óóQ R
.
óóR S
LoginProvider
óóS `
,
óó` a
x
óób c
.
óóc d
Name
óód h
}
óói j
)
óój k
;
óók l
table
òò 
.
òò 

ForeignKey
òò $
(
òò$ %
name
ôô 
:
ôô 
$str
ôô F
,
ôôF G
column
öö 
:
öö 
x
öö  !
=>
öö" $
x
öö% &
.
öö& '
UserId
öö' -
,
öö- .
principalTable
õõ &
:
õõ& '
$str
õõ( 5
,
õõ5 6
principalColumn
úú '
:
úú' (
$str
úú) -
,
úú- .
onDelete
ùù  
:
ùù  !
ReferentialAction
ùù" 3
.
ùù3 4
Cascade
ùù4 ;
)
ùù; <
;
ùù< =
}
ûû 
)
ûû 
;
ûû 
migrationBuilder
†† 
.
†† 
CreateIndex
†† (
(
††( )
name
°° 
:
°° 
$str
°° 2
,
°°2 3
table
¢¢ 
:
¢¢ 
$str
¢¢ )
,
¢¢) *
column
££ 
:
££ 
$str
££  
)
££  !
;
££! "
migrationBuilder
•• 
.
•• 
CreateIndex
•• (
(
••( )
name
¶¶ 
:
¶¶ 
$str
¶¶ %
,
¶¶% &
table
ßß 
:
ßß 
$str
ßß $
,
ßß$ %
column
®® 
:
®® 
$str
®® (
,
®®( )
unique
©© 
:
©© 
true
©© 
)
©© 
;
©© 
migrationBuilder
´´ 
.
´´ 
CreateIndex
´´ (
(
´´( )
name
¨¨ 
:
¨¨ 
$str
¨¨ 2
,
¨¨2 3
table
≠≠ 
:
≠≠ 
$str
≠≠ )
,
≠≠) *
column
ÆÆ 
:
ÆÆ 
$str
ÆÆ  
)
ÆÆ  !
;
ÆÆ! "
migrationBuilder
∞∞ 
.
∞∞ 
CreateIndex
∞∞ (
(
∞∞( )
name
±± 
:
±± 
$str
±± 2
,
±±2 3
table
≤≤ 
:
≤≤ 
$str
≤≤ )
,
≤≤) *
column
≥≥ 
:
≥≥ 
$str
≥≥  
)
≥≥  !
;
≥≥! "
migrationBuilder
µµ 
.
µµ 
CreateIndex
µµ (
(
µµ( )
name
∂∂ 
:
∂∂ 
$str
∂∂ 1
,
∂∂1 2
table
∑∑ 
:
∑∑ 
$str
∑∑ (
,
∑∑( )
column
∏∏ 
:
∏∏ 
$str
∏∏  
)
∏∏  !
;
∏∏! "
migrationBuilder
∫∫ 
.
∫∫ 
CreateIndex
∫∫ (
(
∫∫( )
name
ªª 
:
ªª 
$str
ªª "
,
ªª" #
table
ºº 
:
ºº 
$str
ºº $
,
ºº$ %
column
ΩΩ 
:
ΩΩ 
$str
ΩΩ )
)
ΩΩ) *
;
ΩΩ* +
migrationBuilder
øø 
.
øø 
CreateIndex
øø (
(
øø( )
name
¿¿ 
:
¿¿ 
$str
¿¿ %
,
¿¿% &
table
¡¡ 
:
¡¡ 
$str
¡¡ $
,
¡¡$ %
column
¬¬ 
:
¬¬ 
$str
¬¬ ,
,
¬¬, -
unique
√√ 
:
√√ 
true
√√ 
)
√√ 
;
√√ 
}
ƒƒ 	
	protected
«« 
override
«« 
void
«« 
Down
««  $
(
««$ %
MigrationBuilder
««% 5
migrationBuilder
««6 F
)
««F G
{
»» 	
migrationBuilder
…… 
.
…… 
	DropTable
…… &
(
……& '
name
   
:
   
$str
   (
)
  ( )
;
  ) *
migrationBuilder
ÃÃ 
.
ÃÃ 
	DropTable
ÃÃ &
(
ÃÃ& '
name
ÕÕ 
:
ÕÕ 
$str
ÕÕ (
)
ÕÕ( )
;
ÕÕ) *
migrationBuilder
œœ 
.
œœ 
	DropTable
œœ &
(
œœ& '
name
–– 
:
–– 
$str
–– (
)
––( )
;
––) *
migrationBuilder
““ 
.
““ 
	DropTable
““ &
(
““& '
name
”” 
:
”” 
$str
”” '
)
””' (
;
””( )
migrationBuilder
’’ 
.
’’ 
	DropTable
’’ &
(
’’& '
name
÷÷ 
:
÷÷ 
$str
÷÷ (
)
÷÷( )
;
÷÷) *
migrationBuilder
ÿÿ 
.
ÿÿ 
	DropTable
ÿÿ &
(
ÿÿ& '
name
ŸŸ 
:
ŸŸ 
$str
ŸŸ #
)
ŸŸ# $
;
ŸŸ$ %
migrationBuilder
€€ 
.
€€ 
	DropTable
€€ &
(
€€& '
name
‹‹ 
:
‹‹ 
$str
‹‹ #
)
‹‹# $
;
‹‹$ %
}
›› 	
}
ﬁﬁ 
}ﬂﬂ „&
WC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Data\ApplicationDbContext.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Data 
{ 
public		 

class		  
ApplicationDbContext		 %
:		& '
IdentityDbContext		( 9
<		9 :
ApplicationUser		: I
>		I J
{

 
public  
ApplicationDbContext #
(# $
DbContextOptions$ 4
<4 5 
ApplicationDbContext5 I
>I J
optionsK R
)R S
: 
base 
( 
options 
) 
{ 
} 
public 
DbSet 
< 
Client 
> 
Clients $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
DbSet 
< 
DocumentType !
>! "
DocumentTypes# 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
DbSet 
< 
SignedDocument #
># $
SignedDocuments% 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
public 
DbSet 
< 

FileEntity 
>  
Files! &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
modelBuilder 
. 
Entity 
<  
Client  &
>& '
(' (
)( )
.) *
HasData* 1
(1 2
new 
Client 
{ 
Id 
=  !
$num" #
,# $
Name% )
=* +
$str, ;
,; <
Email= B
=C D
$strE X
}Y Z
,Z [
new 
Client 
{ 
Id 
=  !
$num" #
,# $
Name% )
=* +
$str, 9
,9 :
Email; @
=A B
$strC U
}V W
) 
; 
modelBuilder   
.   
Entity   
<    
DocumentType    ,
>  , -
(  - .
)  . /
.  / 0
HasData  0 7
(  7 8
new!! 
DocumentType!!  
{!!! "
Id!!# %
=!!& '
$num!!( )
,!!) *
Name!!+ /
=!!0 1
$str!!2 ;
,!!; <
Description!!= H
=!!I J
$str!!K f
}!!g h
,!!h i
new"" 
DocumentType""  
{""! "
Id""# %
=""& '
$num""( )
,"") *
Name""+ /
=""0 1
$str""2 7
,""7 8
Description""9 D
=""E F
$str""G ]
}""^ _
)## 
;## 
modelBuilder%% 
.%% 
Entity%% 
<%%  
SignedDocument%%  .
>%%. /
(%%/ 0
)%%0 1
.%%1 2
HasData%%2 9
(%%9 :
new&& 
SignedDocument&& 
{'' 
Id(( 

=(( 
$num(( 
,(( 
FileName)) 
=)) 
$str)) $
,))$ %

UploadedAt** 
=** 
new** 
DateTime** !
(**! "
$num**" &
,**& '
$num**( *
,*** +
$num**, .
,**. /
$num**0 2
,**2 3
$num**4 6
,**6 7
$num**8 :
)**: ;
,**; <
ClientId++ 
=++ 
$num++ 
,++ 
DocumentTypeId,, 
=,, 
$num,, 
}-- 
,-- 
new.. 
SignedDocument.. 
{// 
Id00 

=00 
$num00 
,00 
FileName11 
=11 
$str11  
,11  !

UploadedAt22 
=22 
new22 
DateTime22 !
(22! "
$num22" &
,22& '
$num22( *
,22* +
$num22, .
,22. /
$num220 2
,222 3
$num224 6
,226 7
$num228 :
)22: ;
,22; <
ClientId33 
=33 
$num33 
,33 
DocumentTypeId44 
=44 
$num44 
}55 
)66 
;66 
}77 	
}88 
}99 …
[C:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Controllers\VersionController.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Controllers #
{ 
public 

class 
VersionController "
:# $

Controller% /
{ 
public 
IActionResult 
Set  
(  !
string! '
v( )
,) *
string+ 1
?1 2
	returnUrl3 <
== >
$str? B
)B C
{ 	
if		 
(		 
v		 
!=		 
$str		 
&&		 
v		 
!=		  "
$str		# (
)		( )
v

 
=

 
$str

 
;

 
Response 
. 
Cookies 
. 
Append #
(# $
$str 
, 
v 
, 
new 
CookieOptions !
{ 
Expires 
= 
DateTimeOffset ,
., -
UtcNow- 3
.3 4
AddYears4 <
(< =
$num= >
)> ?
,? @
IsEssential 
=  !
true" &
,& '
HttpOnly 
= 
false $
} 
) 
; 
return 
Redirect 
( 
	returnUrl %
??& (
$str) ,
), -
;- .
} 	
} 
} Ég
_C:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Controllers\SubroutinesController.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Controllers #
;# $
[ 
	Authorize 

]
 
public 
class !
SubroutinesController "
:# $

Controller% /
{ 
private 
readonly  
ApplicationDbContext )
_db* -
;- .
private 
readonly 
CryptoService "
_crypto# *
;* +
private 
readonly 
IWebHostEnvironment (
_env) -
;- .
public 
!
SubroutinesController  
(  ! 
ApplicationDbContext! 5
db6 8
,8 9
CryptoService: G
cryptoH N
,N O
IWebHostEnvironmentP c
envd g
)g h
{ 
_db 
= 
db 
; 
_crypto 
= 
crypto 
; 
_env 
= 
env 
; 
} 
[ 
HttpGet 
] 
public 

async 
Task 
< 
IActionResult #
># $
Upload% +
(+ ,
), -
{   
var!! 
model!! 
=!! 
new!! 
UploadViewModel!! '
{"" 	
Clients## 
=## 
await## 
_db## 
.##  
Clients##  '
.$$ 
Select$$ 
($$ 
c$$ 
=>$$ 
new$$  
SelectListItem$$! /
{$$0 1
Value$$2 7
=$$8 9
c$$: ;
.$$; <
Id$$< >
.$$> ?
ToString$$? G
($$G H
)$$H I
,$$I J
Text$$K O
=$$P Q
c$$R S
.$$S T
Name$$T X
}$$Y Z
)$$Z [
.%% 
ToListAsync%% 
(%% 
)%% 
,%% 
DocumentTypes'' 
='' 
await'' !
_db''" %
.''% &
DocumentTypes''& 3
.(( 
Select(( 
((( 
d(( 
=>(( 
new((  
SelectListItem((! /
{((0 1
Value((2 7
=((8 9
d((: ;
.((; <
Id((< >
.((> ?
ToString((? G
(((G H
)((H I
,((I J
Text((K O
=((P Q
d((R S
.((S T
Name((T X
}((Y Z
)((Z [
.)) 
ToListAsync)) 
()) 
))) 
}** 	
;**	 

return,, 
View,, 
(,, 
model,, 
),, 
;,, 
}-- 
[// 
HttpPost// 
]// 
public00 

async00 
Task00 
<00 
IActionResult00 #
>00# $
Upload00% +
(00+ ,
UploadViewModel00, ;
model00< A
)00A B
{11 
if22 

(22 
model22 
.22 
File22 
==22 
null22 
||22 !
model22" '
.22' (
File22( ,
.22, -
Length22- 3
==224 6
$num227 8
)228 9
{33 	
ViewBag44 
.44 
Message44 
=44 
$str44 0
;440 1
return55 
await55 
Upload55 
(55  
)55  !
;55! "
}66 	
var99 
folder99 
=99 
Path99 
.99 
Combine99 !
(99! "
_env99" &
.99& '
WebRootPath99' 2
,992 3
$str994 =
)99= >
;99> ?
	Directory:: 
.:: 
CreateDirectory:: !
(::! "
folder::" (
)::( )
;::) *
var<< 
id<< 
=<< 
Guid<< 
.<< 
NewGuid<< 
(<< 
)<< 
;<<  
var== 
	savedName== 
=== 
id== 
+== 
Path== !
.==! "
GetExtension==" .
(==. /
model==/ 4
.==4 5
File==5 9
.==9 :
FileName==: B
)==B C
;==C D
var>> 
path>> 
=>> 
Path>> 
.>> 
Combine>> 
(>>  
folder>>  &
,>>& '
	savedName>>( 1
)>>1 2
;>>2 3
using@@ 
(@@ 
var@@ 
stream@@ 
=@@ 
new@@ 

FileStream@@  *
(@@* +
path@@+ /
,@@/ 0
FileMode@@1 9
.@@9 :
Create@@: @
)@@@ A
)@@A B
awaitAA 
modelAA 
.AA 
FileAA 
.AA 
CopyToAsyncAA (
(AA( )
streamAA) /
)AA/ 0
;AA0 1
varDD 
entityDD 
=DD 
newDD 

FileEntityDD #
{EE 	
IdFF 
=FF 
idFF 
,FF 
FileNameGG 
=GG 
modelGG 
.GG 
FileGG !
.GG! "
FileNameGG" *
,GG* +
FilePathHH 
=HH 
pathHH 
}II 	
;II	 

_dbKK 
.KK 
FilesKK 
.KK 
AddKK 
(KK 
entityKK 
)KK 
;KK 
varNN 
docNN 
=NN 
newNN 
SignedDocumentNN $
{OO 	
FileNamePP 
=PP 
modelPP 
.PP 
FilePP !
.PP! "
FileNamePP" *
,PP* +

UploadedAtQQ 
=QQ 
modelQQ 
.QQ 

UploadedAtQQ )
,QQ) *
ClientIdRR 
=RR 
modelRR 
.RR 
ClientIdRR %
,RR% &
DocumentTypeIdSS 
=SS 
modelSS "
.SS" #
DocumentTypeIdSS# 1
,SS1 2
IsSignedTT 
=TT 
falseTT 
,TT 
SignedAtUU 
=UU 
nullUU 
}VV 	
;VV	 

_dbXX 
.XX 
SignedDocumentsXX 
.XX 
AddXX 
(XX  
docXX  #
)XX# $
;XX$ %
awaitZZ 
_dbZZ 
.ZZ 
SaveChangesAsyncZZ "
(ZZ" #
)ZZ# $
;ZZ$ %
ViewBag\\ 
.\\ 
FileId\\ 
=\\ 
id\\ 
;\\ 
ViewBag]] 
.]] 
Message]] 
=]] 
$str]] 5
;]]5 6
return^^ 
await^^ 
Upload^^ 
(^^ 
)^^ 
;^^ 
}__ 
[dd 
HttpGetdd 
]dd 
publicee 

IActionResultee 
SignFileee !
(ee! "
)ee" #
=>ee$ &
Viewee' +
(ee+ ,
)ee, -
;ee- .
[gg 
HttpPostgg 
]gg 
publichh 

asynchh 
Taskhh 
<hh 
IActionResulthh #
>hh# $
SignFilehh% -
(hh- .
Guidhh. 2
fileIdhh3 9
)hh9 :
{ii 
varjj 
filejj 
=jj 
awaitjj 
_dbjj 
.jj 
Filesjj "
.jj" #
	FindAsyncjj# ,
(jj, -
fileIdjj- 3
)jj3 4
;jj4 5
ifkk 

(kk 
filekk 
==kk 
nullkk 
)kk 
{ll 	
ViewBagmm 
.mm 
Messagemm 
=mm 
$strmm 1
;mm1 2
returnnn 
Viewnn 
(nn 
)nn 
;nn 
}oo 	
varrr 
bytesrr 
=rr 
awaitrr 
Systemrr  
.rr  !
IOrr! #
.rr# $
Filerr$ (
.rr( )
ReadAllBytesAsyncrr) :
(rr: ;
filerr; ?
.rr? @
FilePathrr@ H
)rrH I
;rrI J
varss 
keysss 
=ss 
_cryptoss 
.ss 
GenerateRsaKeyPairss -
(ss- .
)ss. /
;ss/ 0
vartt 
	signaturett 
=tt 
_cryptott 
.tt  
SignToBase64tt  ,
(tt, -
bytestt- 2
,tt2 3
keystt4 8
.tt8 9

privatePemtt9 C
)ttC D
;ttD E
filevv 
.vv 
SignatureBase64vv 
=vv 
	signaturevv (
;vv( )
fileww 
.ww 
PublicKeyPemww 
=ww 
keysww  
.ww  !
	publicPemww! *
;ww* +
varzz 
doczz 
=zz 
awaitzz 
_dbzz 
.zz 
SignedDocumentszz +
.{{ 
FirstOrDefaultAsync{{  
({{  !
d{{! "
=>{{# %
d{{& '
.{{' (
FileName{{( 0
=={{1 3
file{{4 8
.{{8 9
FileName{{9 A
){{A B
;{{B C
if}} 

(}} 
doc}} 
!=}} 
null}} 
)}} 
{~~ 	
doc 
. 
IsSigned 
= 
true 
;  
doc
ÄÄ 
.
ÄÄ 
SignedAt
ÄÄ 
=
ÄÄ 
DateTime
ÄÄ #
.
ÄÄ# $
UtcNow
ÄÄ$ *
;
ÄÄ* +
}
ÅÅ 	
await
ÉÉ 
_db
ÉÉ 
.
ÉÉ 
SaveChangesAsync
ÉÉ "
(
ÉÉ" #
)
ÉÉ# $
;
ÉÉ$ %
ViewBag
ÖÖ 
.
ÖÖ 
Message
ÖÖ 
=
ÖÖ 
$str
ÖÖ 5
;
ÖÖ5 6
ViewBag
ÜÜ 
.
ÜÜ 
	Signature
ÜÜ 
=
ÜÜ 
	signature
ÜÜ %
;
ÜÜ% &
ViewBag
áá 
.
áá 
	PublicKey
áá 
=
áá 
keys
áá  
.
áá  !
	publicPem
áá! *
;
áá* +
return
ââ 
View
ââ 
(
ââ 
)
ââ 
;
ââ 
}
ää 
[
èè 
HttpGet
èè 
]
èè 
public
êê 

IActionResult
êê 

VerifyFile
êê #
(
êê# $
)
êê$ %
=>
êê& (
View
êê) -
(
êê- .
)
êê. /
;
êê/ 0
[
íí 
HttpPost
íí 
]
íí 
public
ìì 

async
ìì 
Task
ìì 
<
ìì 
IActionResult
ìì #
>
ìì# $

VerifyFile
ìì% /
(
ìì/ 0
Guid
ìì0 4
fileId
ìì5 ;
)
ìì; <
{
îî 
var
ïï 
file
ïï 
=
ïï 
await
ïï 
_db
ïï 
.
ïï 
Files
ïï "
.
ïï" #
	FindAsync
ïï# ,
(
ïï, -
fileId
ïï- 3
)
ïï3 4
;
ïï4 5
if
ññ 

(
ññ 
file
ññ 
==
ññ 
null
ññ 
)
ññ 
{
óó 	
ViewBag
òò 
.
òò 
Message
òò 
=
òò 
$str
òò 1
;
òò1 2
return
ôô 
View
ôô 
(
ôô 
)
ôô 
;
ôô 
}
öö 	
if
úú 

(
úú 
file
úú 
.
úú 
SignatureBase64
úú  
==
úú! #
null
úú$ (
||
úú) +
file
úú, 0
.
úú0 1
PublicKeyPem
úú1 =
==
úú> @
null
úúA E
)
úúE F
{
ùù 	
ViewBag
ûû 
.
ûû 
Message
ûû 
=
ûû 
$str
ûû 5
;
ûû5 6
return
üü 
View
üü 
(
üü 
)
üü 
;
üü 
}
†† 	
var
¢¢ 
bytes
¢¢ 
=
¢¢ 
await
¢¢ 
System
¢¢  
.
¢¢  !
IO
¢¢! #
.
¢¢# $
File
¢¢$ (
.
¢¢( )
ReadAllBytesAsync
¢¢) :
(
¢¢: ;
file
¢¢; ?
.
¢¢? @
FilePath
¢¢@ H
)
¢¢H I
;
¢¢I J
bool
££ 
isValid
££ 
=
££ 
_crypto
££ 
.
££ 
VerifySignature
££ .
(
££. /
bytes
££/ 4
,
££4 5
file
££6 :
.
££: ;
SignatureBase64
££; J
,
££J K
file
££L P
.
££P Q
PublicKeyPem
££Q ]
)
££] ^
;
££^ _
ViewBag
•• 
.
•• 
Message
•• 
=
•• 
isValid
•• !
?
••" #
$str
••$ 7
:
••8 9
$str
••: O
;
••O P
return
¶¶ 
View
¶¶ 
(
¶¶ 
)
¶¶ 
;
¶¶ 
}
ßß 
}®® ˝
cC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Controllers\SignedDocumentsController.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Controllers #
{ 
public 

class %
SignedDocumentsController *
:+ ,

Controller- 7
{ 
public 
IActionResult 
Index "
(" #
)# $
{ 	
return		 
View		 
(		 
)		 
;		 
}

 	
public 
IActionResult 
IndexV1 $
($ %
)% &
{ 	
return 
View 
( 
) 
; 
} 	
public 
IActionResult 
IndexV2 $
($ %
)% &
{ 	
return 
View 
( 
) 
; 
} 	
} 
} Ú0
ZC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Controllers\SearchController.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Controllers #
{ 
public		 

class		 
SearchController		 !
:		" #

Controller		$ .
{

 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public 
SearchController 
(   
ApplicationDbContext  4
context5 <
)< =
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
model 
= 
new #
DocumentSearchViewModel 3
{ 
Clients 
= 
await 
_context  (
.( )
Clients) 0
. 
Select 
( 
c 
=>  
new! $
SelectListItem% 3
{ 
Value 
= 
c  !
.! "
Id" $
.$ %
ToString% -
(- .
). /
,/ 0
Text 
= 
c  
.  !
Name! %
} 
) 
. 
ToListAsync  
(  !
)! "
} 
; 
return   
View   
(   
model   
)   
;   
}!! 	
[## 	
HttpPost##	 
]## 
public$$ 
async$$ 
Task$$ 
<$$ 
IActionResult$$ '
>$$' (
Index$$) .
($$. /#
DocumentSearchViewModel$$/ F
model$$G L
)$$L M
{%% 	
var&& 
query&& 
=&& 
_context&&  
.&&  !
SignedDocuments&&! 0
.'' 
Include'' 
('' 
d'' 
=>'' 
d'' 
.''  
Client''  &
)''& '
.(( 
Include(( 
((( 
d(( 
=>(( 
d(( 
.((  
DocumentType((  ,
)((, -
.)) 
AsQueryable)) 
()) 
))) 
;)) 
if++ 
(++ 
model++ 
.++ 
DateFrom++ 
.++ 
HasValue++ '
)++' (
query,, 
=,, 
query,, 
.,, 
Where,, #
(,,# $
d,,$ %
=>,,& (
d,,) *
.,,* +

UploadedAt,,+ 5
>=,,6 8
model,,9 >
.,,> ?
DateFrom,,? G
.,,G H
Value,,H M
),,M N
;,,N O
if.. 
(.. 
model.. 
... 
DateTo.. 
... 
HasValue.. %
)..% &
query// 
=// 
query// 
.// 
Where// #
(//# $
d//$ %
=>//& (
d//) *
.//* +

UploadedAt//+ 5
<=//6 8
model//9 >
.//> ?
DateTo//? E
.//E F
Value//F K
)//K L
;//L M
if11 
(11 
model11 
.11 
SelectedClientIds11 '
!=11( *
null11+ /
&&110 2
model113 8
.118 9
SelectedClientIds119 J
.11J K
Any11K N
(11N O
)11O P
)11P Q
query22 
=22 
query22 
.22 
Where22 #
(22# $
d22$ %
=>22& (
model22) .
.22. /
SelectedClientIds22/ @
.22@ A
Contains22A I
(22I J
d22J K
.22K L
ClientId22L T
)22T U
)22U V
;22V W
if44 
(44 
!44 
string44 
.44 
IsNullOrWhiteSpace44 *
(44* +
model44+ 0
.440 1
FileNameStartsWith441 C
)44C D
)44D E
query55 
=55 
query55 
.55 
Where55 #
(55# $
d55$ %
=>55& (
d55) *
.55* +
FileName55+ 3
.553 4

StartsWith554 >
(55> ?
model55? D
.55D E
FileNameStartsWith55E W
)55W X
)55X Y
;55Y Z
if77 
(77 
!77 
string77 
.77 
IsNullOrWhiteSpace77 *
(77* +
model77+ 0
.770 1
FileNameEndsWith771 A
)77A B
)77B C
query88 
=88 
query88 
.88 
Where88 #
(88# $
d88$ %
=>88& (
d88) *
.88* +
FileName88+ 3
.883 4
EndsWith884 <
(88< =
model88= B
.88B C
FileNameEndsWith88C S
)88S T
)88T U
;88U V
model:: 
.:: 
Results:: 
=:: 
await:: !
query::" '
.::' (
ToListAsync::( 3
(::3 4
)::4 5
;::5 6
model<< 
.<< 
Clients<< 
=<< 
await<< !
_context<<" *
.<<* +
Clients<<+ 2
.== 
Select== 
(== 
c== 
=>== 
new==  
SelectListItem==! /
{>> 
Value?? 
=?? 
c?? 
.?? 
Id??  
.??  !
ToString??! )
(??) *
)??* +
,??+ ,
Text@@ 
=@@ 
c@@ 
.@@ 
Name@@ !
}AA 
)AA 
.BB 
ToListAsyncBB 
(BB 
)BB 
;BB 
returnDD 
ViewDD 
(DD 
modelDD 
)DD 
;DD 
}EE 	
}FF 
}GG »
XC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Controllers\HomeController.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Controllers #
;# $
public 
class 
HomeController 
: 

Controller (
{ 
[ 
AllowAnonymous 
] 
public		 

IActionResult		 
Index		 
(		 
)		  
=>		! #
View		$ (
(		( )
)		) *
;		* +
} ˘
aC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Controllers\DocumentTypesController.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Controllers #
{ 
public 

class #
DocumentTypesController (
:) *

Controller+ 5
{ 
public 
IActionResult 
Index "
(" #
)# $
{ 	
return		 
View		 
(		 
)		 
;		 
}

 	
public 
IActionResult 
IndexV1 $
($ %
)% &
{ 	
return 
View 
( 
) 
; 
} 	
public 
IActionResult 
IndexV2 $
($ %
)% &
{ 	
return 
View 
( 
) 
; 
} 	
} 
} Ì
[C:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Controllers\ClientsController.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Controllers #
{ 
public 

class 
ClientsController "
:# $

Controller% /
{ 
public 
IActionResult 
Index "
(" #
)# $
{ 	
return		 
View		 
(		 
)		 
;		 
}

 	
public 
IActionResult 
IndexV1 $
($ %
)% &
{ 	
return 
View 
( 
) 
; 
} 	
public 
IActionResult 
IndexV2 $
($ %
)% &
{ 	
return 
View 
( 
) 
; 
} 	
} 
} «
XC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Controllers\AuthController.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Controllers #
;# $
public 
class 
AuthController 
: 

Controller (
{		 
[

 
HttpPost

 
,

 
AllowAnonymous

 
]

 
public 

IActionResult 
Login 
( 
string %
?% &
	returnUrl' 0
=1 2
$str3 6
)6 7
{ 
return 
	Challenge 
( 
new $
AuthenticationProperties 5
{6 7
RedirectUri8 C
=D E
	returnUrlF O
}P Q
,Q R
$strS Y
)Y Z
;Z [
} 
[ 
HttpPost 
] 
public 

IActionResult 
Logout 
(  
)  !
{ 
return 
SignOut 
( 
new $
AuthenticationProperties (
{) *
RedirectUri+ 6
=7 8
$str9 <
}= >
,> ?(
CookieAuthenticationDefaults (
.( ) 
AuthenticationScheme) =
,= >
$str 
) 
; 
} 
} ©H
gC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Controllers\Api\SignedDocumentsController.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Controllers #
.# $
Api$ '
{ 
[		 
ApiController		 
]		 
[

 
Route

 

(


 
$str

 7
)

7 8
]

8 9
[ 

ApiVersion 
( 
$str 
) 
] 
[ 

ApiVersion 
( 
$str 
) 
] 
public 

class %
SignedDocumentsController *
:+ ,
ControllerBase- ;
{ 
private 
readonly  
ApplicationDbContext -
_db. 1
;1 2
private 
readonly 
IWebHostEnvironment ,
_env- 1
;1 2
public %
SignedDocumentsController (
(( ) 
ApplicationDbContext) =
db> @
,@ A
IWebHostEnvironmentB U
envV Y
)Y Z
{ 	
_db 
= 
db 
; 
_env 
= 
env 
; 
} 	
[ 	
HttpGet	 
( 
Name 
= 
$str *
)* +
]+ ,
[ 	
MapToApiVersion	 
( 
$str 
) 
]  
public 
async 
Task 
< 
IEnumerable %
<% &
SignedDocumentV1Dto& 9
>9 :
>: ;
GetV1< A
(A B
)B C
{ 	
return 
await 
_db 
. 
SignedDocuments ,
. 
Include 
( 
d 
=> 
d 
.  
Client  &
)& '
. 
Select 
( 
d 
=> 
new  
SignedDocumentV1Dto! 4
{   
Id!! 
=!! 
d!! 
.!! 
Id!! 
,!! 
FileName"" 
="" 
d""  
.""  !
FileName""! )
,"") *

ClientName## 
=##  
d##! "
.##" #
Client### )
.##) *
Name##* .
,##. /
IsSigned$$ 
=$$ 
d$$  
.$$  !
IsSigned$$! )
}%% 
)%% 
.&& 
ToListAsync&& 
(&& 
)&& 
;&& 
}'' 	
[** 	
HttpGet**	 
(** 
Name** 
=** 
$str** *
)*** +
]**+ ,
[++ 	
MapToApiVersion++	 
(++ 
$str++ 
)++ 
]++  
public,, 
async,, 
Task,, 
<,, 
IEnumerable,, %
<,,% &
SignedDocumentV2Dto,,& 9
>,,9 :
>,,: ;
GetV2,,< A
(,,A B
),,B C
{-- 	
return.. 
await.. 
_db.. 
... 
SignedDocuments.. ,
.// 
Include// 
(// 
d// 
=>// 
d// 
.//  
Client//  &
)//& '
.00 
Include00 
(00 
d00 
=>00 
d00 
.00  
DocumentType00  ,
)00, -
.11 
Select11 
(11 
d11 
=>11 
new11  
SignedDocumentV2Dto11! 4
{22 
Id33 
=33 
d33 
.33 
Id33 
,33 
FileName44 
=44 
d44  
.44  !
FileName44! )
,44) *

ClientName55 
=55  
d55! "
.55" #
Client55# )
.55) *
Name55* .
,55. /
DocumentTypeName66 $
=66% &
d66' (
.66( )
DocumentType66) 5
.665 6
Name666 :
,66: ;

UploadedAt77 
=77  
d77! "
.77" #

UploadedAt77# -
,77- .
IsSigned88 
=88 
d88  
.88  !
IsSigned88! )
,88) *
SignedAt99 
=99 
d99  
.99  !
SignedAt99! )
}:: 
):: 
.;; 
ToListAsync;; 
(;; 
);; 
;;; 
}<< 	
[?? 	
HttpGet??	 
(?? 
$str?? 
,?? 
Name?? !
=??" #
$str??$ 8
)??8 9
]??9 :
public@@ 
async@@ 
Task@@ 
<@@ 
ActionResult@@ &
<@@& '
SignedDocumentV2Dto@@' :
>@@: ;
>@@; <
GetById@@= D
(@@D E
int@@E H
id@@I K
)@@K L
{AA 	
varBB 
dBB 
=BB 
awaitBB 
_dbBB 
.BB 
SignedDocumentsBB -
.CC 
IncludeCC 
(CC 
xCC 
=>CC 
xCC 
.CC  
ClientCC  &
)CC& '
.DD 
IncludeDD 
(DD 
xDD 
=>DD 
xDD 
.DD  
DocumentTypeDD  ,
)DD, -
.EE 
FirstOrDefaultAsyncEE $
(EE$ %
xEE% &
=>EE' )
xEE* +
.EE+ ,
IdEE, .
==EE/ 1
idEE2 4
)EE4 5
;EE5 6
ifGG 
(GG 
dGG 
==GG 
nullGG 
)GG 
returnHH 
NotFoundHH 
(HH  
)HH  !
;HH! "
returnJJ 
newJJ 
SignedDocumentV2DtoJJ *
{KK 
IdLL 
=LL 
dLL 
.LL 
IdLL 
,LL 
FileNameMM 
=MM 
dMM 
.MM 
FileNameMM %
,MM% &

ClientNameNN 
=NN 
dNN 
.NN 
ClientNN %
.NN% &
NameNN& *
,NN* +
DocumentTypeNameOO  
=OO! "
dOO# $
.OO$ %
DocumentTypeOO% 1
.OO1 2
NameOO2 6
,OO6 7

UploadedAtPP 
=PP 
dPP 
.PP 

UploadedAtPP )
,PP) *
IsSignedQQ 
=QQ 
dQQ 
.QQ 
IsSignedQQ %
,QQ% &
SignedAtRR 
=RR 
dRR 
.RR 
SignedAtRR %
}SS 
;SS 
}TT 	
[WW 	

HttpDeleteWW	 
(WW 
$strWW 
,WW 
NameWW  $
=WW% &
$strWW' :
)WW: ;
]WW; <
publicXX 
asyncXX 
TaskXX 
<XX 
IActionResultXX '
>XX' (
DeleteXX) /
(XX/ 0
intXX0 3
idXX4 6
)XX6 7
{YY 	
varZZ 
docZZ 
=ZZ 
awaitZZ 
_dbZZ 
.ZZ  
SignedDocumentsZZ  /
.ZZ/ 0
	FindAsyncZZ0 9
(ZZ9 :
idZZ: <
)ZZ< =
;ZZ= >
if[[ 
([[ 
doc[[ 
==[[ 
null[[ 
)[[ 
return\\ 
NotFound\\ 
(\\  
)\\  !
;\\! "
var^^ 

fileEntity^^ 
=^^ 
await^^ "
_db^^# &
.^^& '
Files^^' ,
.__ 
FirstOrDefaultAsync__ $
(__$ %
f__% &
=>__' )
f__* +
.__+ ,
FileName__, 4
==__5 7
doc__8 ;
.__; <
FileName__< D
)__D E
;__E F
ifaa 
(aa 

fileEntityaa 
!=aa 
nullaa "
&&aa# %
Systemaa& ,
.aa, -
IOaa- /
.aa/ 0
Fileaa0 4
.aa4 5
Existsaa5 ;
(aa; <

fileEntityaa< F
.aaF G
FilePathaaG O
)aaO P
)aaP Q
Systembb 
.bb 
IObb 
.bb 
Filebb 
.bb 
Deletebb %
(bb% &

fileEntitybb& 0
.bb0 1
FilePathbb1 9
)bb9 :
;bb: ;
ifdd 
(dd 

fileEntitydd 
!=dd 
nulldd "
)dd" #
_dbee 
.ee 
Filesee 
.ee 
Removeee  
(ee  !

fileEntityee! +
)ee+ ,
;ee, -
_dbgg 
.gg 
SignedDocumentsgg 
.gg  
Removegg  &
(gg& '
docgg' *
)gg* +
;gg+ ,
awaithh 
_dbhh 
.hh 
SaveChangesAsynchh &
(hh& '
)hh' (
;hh( )
returnjj 
	NoContentjj 
(jj 
)jj 
;jj 
}kk 	
}ll 
}mm ÓB
eC:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Controllers\Api\DocumentTypesController.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Controllers #
.# $
Api$ '
{ 
[		 
ApiController		 
]		 
[

 
Route

 

(


 
$str

 5
)

5 6
]

6 7
[ 

ApiVersion 
( 
$str 
) 
] 
[ 

ApiVersion 
( 
$str 
) 
] 
public 

class #
DocumentTypesController (
:) *
ControllerBase+ 9
{ 
private 
readonly  
ApplicationDbContext -
_db. 1
;1 2
public #
DocumentTypesController &
(& ' 
ApplicationDbContext' ;
db< >
)> ?
{ 	
_db 
= 
db 
; 
} 	
[ 	
HttpGet	 
( 
Name 
= 
$str (
)( )
]) *
[ 	
MapToApiVersion	 
( 
$str 
) 
]  
public 
async 
Task 
< 
IEnumerable %
<% &
DocumentTypeV1Dto& 7
>7 8
>8 9
GetV1: ?
(? @
)@ A
{ 	
return 
await 
_db 
. 
DocumentTypes *
. 
Select 
( 
t 
=> 
new  
DocumentTypeV1Dto! 2
{ 
Id 
= 
t 
. 
Id 
, 
Name 
= 
t 
. 
Name !
}   
)   
.!! 
ToListAsync!! 
(!! 
)!! 
;!! 
}"" 	
[%% 	
HttpGet%%	 
(%% 
Name%% 
=%% 
$str%% (
)%%( )
]%%) *
[&& 	
MapToApiVersion&&	 
(&& 
$str&& 
)&& 
]&&  
public'' 
async'' 
Task'' 
<'' 
IEnumerable'' %
<''% &
DocumentTypeV2Dto''& 7
>''7 8
>''8 9
GetV2'': ?
(''? @
)''@ A
{(( 	
return)) 
await)) 
_db)) 
.)) 
DocumentTypes)) *
.** 
Select** 
(** 
t** 
=>** 
new**  
DocumentTypeV2Dto**! 2
{++ 
Id,, 
=,, 
t,, 
.,, 
Id,, 
,,, 
Name-- 
=-- 
t-- 
.-- 
Name-- !
,--! "
Description.. 
=..  !
t.." #
...# $
Description..$ /
}// 
)// 
.00 
ToListAsync00 
(00 
)00 
;00 
}11 	
[44 	
HttpGet44	 
(44 
$str44 
,44 
Name44 !
=44" #
$str44$ 6
)446 7
]447 8
public55 
async55 
Task55 
<55 
ActionResult55 &
<55& '
DocumentTypeV2Dto55' 8
>558 9
>559 :
GetById55; B
(55B C
int55C F
id55G I
)55I J
{66 	
var77 
t77 
=77 
await77 
_db77 
.77 
DocumentTypes77 +
.77+ ,
	FindAsync77, 5
(775 6
id776 8
)778 9
;779 :
if88 
(88 
t88 
==88 
null88 
)88 
return99 
NotFound99 
(99  
)99  !
;99! "
return;; 
new;; 
DocumentTypeV2Dto;; (
{<< 
Id== 
=== 
t== 
.== 
Id== 
,== 
Name>> 
=>> 
t>> 
.>> 
Name>> 
,>> 
Description?? 
=?? 
t?? 
.??  
Description??  +
}@@ 
;@@ 
}AA 	
[DD 	
HttpPostDD	 
(DD 
NameDD 
=DD 
$strDD *
)DD* +
]DD+ ,
publicEE 
asyncEE 
TaskEE 
<EE 
ActionResultEE &
<EE& '
DocumentTypeV2DtoEE' 8
>EE8 9
>EE9 :
CreateEE; A
(EEA B
DocumentTypeV2DtoEEB S
dtoEET W
)EEW X
{FF 	
varGG 
typeGG 
=GG 
newGG 
DocumentTypeGG '
{HH 
NameII 
=II 
dtoII 
.II 
NameII 
,II  
DescriptionJJ 
=JJ 
dtoJJ !
.JJ! "
DescriptionJJ" -
}KK 
;KK 
_dbMM 
.MM 
DocumentTypesMM 
.MM 
AddMM !
(MM! "
typeMM" &
)MM& '
;MM' (
awaitNN 
_dbNN 
.NN 
SaveChangesAsyncNN &
(NN& '
)NN' (
;NN( )
dtoPP 
.PP 
IdPP 
=PP 
typePP 
.PP 
IdPP 
;PP 
returnQQ 
CreatedAtActionQQ "
(QQ" #
nameofQQ# )
(QQ) *
GetByIdQQ* 1
)QQ1 2
,QQ2 3
newQQ4 7
{QQ8 9
idQQ: <
=QQ= >
typeQQ? C
.QQC D
IdQQD F
}QQG H
,QQH I
dtoQQJ M
)QQM N
;QQN O
}RR 	
[UU 	
HttpPutUU	 
(UU 
$strUU 
,UU 
NameUU !
=UU" #
$strUU$ 5
)UU5 6
]UU6 7
publicVV 
asyncVV 
TaskVV 
<VV 
IActionResultVV '
>VV' (
UpdateVV) /
(VV/ 0
intVV0 3
idVV4 6
,VV6 7
DocumentTypeV2DtoVV8 I
dtoVVJ M
)VVM N
{WW 	
varXX 
tXX 
=XX 
awaitXX 
_dbXX 
.XX 
DocumentTypesXX +
.XX+ ,
	FindAsyncXX, 5
(XX5 6
idXX6 8
)XX8 9
;XX9 :
ifYY 
(YY 
tYY 
==YY 
nullYY 
)YY 
returnZZ 
NotFoundZZ 
(ZZ  
)ZZ  !
;ZZ! "
t\\ 
.\\ 
Name\\ 
=\\ 
dto\\ 
.\\ 
Name\\ 
;\\ 
t]] 
.]] 
Description]] 
=]] 
dto]] 
.]]  
Description]]  +
;]]+ ,
await__ 
_db__ 
.__ 
SaveChangesAsync__ &
(__& '
)__' (
;__( )
return`` 
	NoContent`` 
(`` 
)`` 
;`` 
}aa 	
[dd 	

HttpDeletedd	 
(dd 
$strdd 
,dd 
Namedd  $
=dd% &
$strdd' 8
)dd8 9
]dd9 :
publicee 
asyncee 
Taskee 
<ee 
IActionResultee '
>ee' (
Deleteee) /
(ee/ 0
intee0 3
idee4 6
)ee6 7
{ff 	
vargg 
tgg 
=gg 
awaitgg 
_dbgg 
.gg 
DocumentTypesgg +
.gg+ ,
	FindAsyncgg, 5
(gg5 6
idgg6 8
)gg8 9
;gg9 :
ifhh 
(hh 
thh 
==hh 
nullhh 
)hh 
returnii 
NotFoundii 
(ii  
)ii  !
;ii! "
_dbkk 
.kk 
DocumentTypeskk 
.kk 
Removekk $
(kk$ %
tkk% &
)kk& '
;kk' (
awaitll 
_dbll 
.ll 
SaveChangesAsyncll &
(ll& '
)ll' (
;ll( )
returnmm 
	NoContentmm 
(mm 
)mm 
;mm 
}nn 	
}oo 
}pp ‚E
_C:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Controllers\Api\ClientsController.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Controllers #
.# $
Api$ '
{ 
[		 
ApiController		 
]		 
[

 
Route

 

(


 
$str

 .
)

. /
]

/ 0
[ 

ApiVersion 
( 
$str 
) 
] 
[ 

ApiVersion 
( 
$str 
) 
] 
public 

class 
ClientsController "
:# $
ControllerBase% 3
{ 
private 
readonly  
ApplicationDbContext -
_db. 1
;1 2
public 
ClientsController  
(  ! 
ApplicationDbContext! 5
db6 8
)8 9
{ 	
_db 
= 
db 
; 
} 	
[ 	
HttpGet	 
( 
Name 
= 
$str '
)' (
]( )
[ 	
MapToApiVersion	 
( 
$str 
) 
]  
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
ClientV1Dto3 >
>> ?
>? @
>@ A
GetV1B G
(G H
)H I
{ 	
var 
clients 
= 
await 
_db  #
.# $
Clients$ +
. 
Select 
( 
c 
=> 
new  
ClientV1Dto! ,
{ 
Id 
= 
c 
. 
Id 
, 
Name 
= 
c 
. 
Name !
}   
)   
.!! 
ToListAsync!! 
(!! 
)!! 
;!! 
return## 
Ok## 
(## 
clients## 
)## 
;## 
}$$ 	
['' 	
HttpGet''	 
('' 
Name'' 
='' 
$str'' '
)''' (
]''( )
[(( 	
MapToApiVersion((	 
((( 
$str(( 
)(( 
]((  
public)) 
async)) 
Task)) 
<)) 
ActionResult)) &
<))& '
IEnumerable))' 2
<))2 3
ClientV2Dto))3 >
>))> ?
>))? @
>))@ A
GetV2))B G
())G H
)))H I
{** 	
var++ 
clients++ 
=++ 
await++ 
_db++  #
.++# $
Clients++$ +
.,, 
Select,, 
(,, 
c,, 
=>,, 
new,,  
ClientV2Dto,,! ,
{-- 
Id.. 
=.. 
c.. 
... 
Id.. 
,.. 
Name// 
=// 
c// 
.// 
Name// !
,//! "
Email00 
=00 
c00 
.00 
Email00 #
}11 
)11 
.22 
ToListAsync22 
(22 
)22 
;22 
return44 
Ok44 
(44 
clients44 
)44 
;44 
}55 	
[88 	
HttpGet88	 
(88 
$str88 
,88 
Name88 !
=88" #
$str88$ 5
)885 6
]886 7
public99 
async99 
Task99 
<99 
ActionResult99 &
<99& '
ClientV2Dto99' 2
>992 3
>993 4
GetById995 <
(99< =
int99= @
id99A C
)99C D
{:: 	
var;; 
c;; 
=;; 
await;; 
_db;; 
.;; 
Clients;; %
.;;% &
	FindAsync;;& /
(;;/ 0
id;;0 2
);;2 3
;;;3 4
if<< 
(<< 
c<< 
==<< 
null<< 
)<< 
return<< !
NotFound<<" *
(<<* +
)<<+ ,
;<<, -
return>> 
Ok>> 
(>> 
new>> 
ClientV2Dto>> %
{?? 
Id@@ 
=@@ 
c@@ 
.@@ 
Id@@ 
,@@ 
NameAA 
=AA 
cAA 
.AA 
NameAA 
,AA 
EmailBB 
=BB 
cBB 
.BB 
EmailBB 
}CC 
)CC 
;CC 
}DD 	
[GG 	
HttpPostGG	 
(GG 
NameGG 
=GG 
$strGG )
)GG) *
]GG* +
publicHH 
asyncHH 
TaskHH 
<HH 
ActionResultHH &
<HH& '
ClientV2DtoHH' 2
>HH2 3
>HH3 4
CreateHH5 ;
(HH; <
ClientV2DtoHH< G
dtoHHH K
)HHK L
{II 	
varJJ 
clientJJ 
=JJ 
newJJ 
ClientJJ #
{KK 
NameLL 
=LL 
dtoLL 
.LL 
NameLL 
,LL  
EmailMM 
=MM 
dtoMM 
.MM 
EmailMM !
}NN 
;NN 
_dbPP 
.PP 
ClientsPP 
.PP 
AddPP 
(PP 
clientPP "
)PP" #
;PP# $
awaitQQ 
_dbQQ 
.QQ 
SaveChangesAsyncQQ &
(QQ& '
)QQ' (
;QQ( )
dtoSS 
.SS 
IdSS 
=SS 
clientSS 
.SS 
IdSS 
;SS 
returnUU 
CreatedAtActionUU "
(UU" #
nameofUU# )
(UU) *
GetByIdUU* 1
)UU1 2
,UU2 3
newUU4 7
{UU8 9
idUU: <
=UU= >
clientUU? E
.UUE F
IdUUF H
,UUH I
versionUUJ Q
=UUR S
$strUUT Y
}UUZ [
,UU[ \
dtoUU] `
)UU` a
;UUa b
}VV 	
[YY 	
HttpPutYY	 
(YY 
$strYY 
,YY 
NameYY !
=YY" #
$strYY$ 4
)YY4 5
]YY5 6
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
IActionResultZZ '
>ZZ' (
UpdateZZ) /
(ZZ/ 0
intZZ0 3
idZZ4 6
,ZZ6 7
ClientV2DtoZZ8 C
dtoZZD G
)ZZG H
{[[ 	
var\\ 
client\\ 
=\\ 
await\\ 
_db\\ "
.\\" #
Clients\\# *
.\\* +
	FindAsync\\+ 4
(\\4 5
id\\5 7
)\\7 8
;\\8 9
if]] 
(]] 
client]] 
==]] 
null]] 
)]] 
return]]  &
NotFound]]' /
(]]/ 0
)]]0 1
;]]1 2
client__ 
.__ 
Name__ 
=__ 
dto__ 
.__ 
Name__ "
;__" #
client`` 
.`` 
Email`` 
=`` 
dto`` 
.`` 
Email`` $
;``$ %
awaitbb 
_dbbb 
.bb 
SaveChangesAsyncbb &
(bb& '
)bb' (
;bb( )
returncc 
	NoContentcc 
(cc 
)cc 
;cc 
}dd 	
[gg 	

HttpDeletegg	 
(gg 
$strgg 
,gg 
Namegg  $
=gg% &
$strgg' 7
)gg7 8
]gg8 9
publichh 
asynchh 
Taskhh 
<hh 
IActionResulthh '
>hh' (
Deletehh) /
(hh/ 0
inthh0 3
idhh4 6
)hh6 7
{ii 	
varjj 
clientjj 
=jj 
awaitjj 
_dbjj "
.jj" #
Clientsjj# *
.jj* +
	FindAsyncjj+ 4
(jj4 5
idjj5 7
)jj7 8
;jj8 9
ifkk 
(kk 
clientkk 
==kk 
nullkk 
)kk 
returnkk  &
NotFoundkk' /
(kk/ 0
)kk0 1
;kk1 2
_dbmm 
.mm 
Clientsmm 
.mm 
Removemm 
(mm 
clientmm %
)mm% &
;mm& '
awaitnn 
_dbnn 
.nn 
SaveChangesAsyncnn &
(nn& '
)nn' (
;nn( )
returnpp 
	NoContentpp 
(pp 
)pp 
;pp 
}qq 	
}rr 
}ss ãZ
[C:\Users\Home PAVILION\source\repos\Edosign5\EdoSign.Lab-3\Controllers\AccountController.cs
	namespace 	
EdoSign
 
. 
Lab_3 
. 
Controllers #
{		 
public

 

class

 
AccountController

 "
:

# $

Controller

% /
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_users6 <
;< =
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signIn8 ?
;? @
public 
AccountController  
(  !
UserManager! ,
<, -
ApplicationUser- <
>< =
users> C
,C D
SignInManagerE R
<R S
ApplicationUserS b
>b c
signInd j
)j k
{ 	
_users 
= 
users 
; 
_signIn 
= 
signIn 
; 
} 	
[ 	
AllowAnonymous	 
] 
public 
IActionResult 
Login "
(" #
string# )
?) *
	returnUrl+ 4
=5 6
null7 ;
); <
{ 	
ViewData 
[ 
$str  
]  !
=" #
	returnUrl$ -
;- .
return 
View 
( 
new 
LoginViewModel *
(* +
)+ ,
), -
;- .
} 	
[ 	
HttpPost	 
, 
AllowAnonymous !
]! "
public   
async   
Task   
<   
IActionResult   '
>  ' (
Login  ) .
(  . /
LoginViewModel  / =
vm  > @
,  @ A
string  B H
?  H I
	returnUrl  J S
=  T U
null  V Z
)  Z [
{!! 	
ViewData"" 
["" 
$str""  
]""  !
=""" #
	returnUrl""$ -
;""- .
if## 
(## 
!## 

ModelState## 
.## 
IsValid## #
)### $
return$$ 
View$$ 
($$ 
vm$$ 
)$$ 
;$$  
var&& 
user&& 
=&& 
await&& 
_users&& #
.&&# $
FindByNameAsync&&$ 3
(&&3 4
vm&&4 6
.&&6 7
UserNameOrEmail&&7 F
)&&F G
;&&G H
if'' 
('' 
user'' 
=='' 
null'' 
)'' 
{(( 

ModelState)) 
.)) 
AddModelError)) (
())( )
string))) /
.))/ 0
Empty))0 5
,))5 6
$str))7 P
)))P Q
;))Q R
return** 
View** 
(** 
vm** 
)** 
;**  
}++ 
var-- 
result-- 
=-- 
await-- 
_signIn-- &
.--& '
PasswordSignInAsync--' :
(--: ;
user.. 
... 
UserName.. 
,.. 
vm// 
.// 
Password// 
,// 
vm00 
.00 

RememberMe00 
,00 
lockoutOnFailure11  
:11  !
false11" '
)11' (
;11( )
if33 
(33 
result33 
.33 
	Succeeded33  
)33  !
return44 
RedirectToLocal44 &
(44& '
	returnUrl44' 0
)440 1
;441 2

ModelState66 
.66 
AddModelError66 $
(66$ %
$str66% '
,66' (
$str66) D
)66D E
;66E F
return77 
View77 
(77 
vm77 
)77 
;77 
}88 	
[== 	
	Authorize==	 
]== 
public>> 
async>> 
Task>> 
<>> 
IActionResult>> '
>>>' (
Logout>>) /
(>>/ 0
)>>0 1
{?? 	
await@@ 
_signIn@@ 
.@@ 
SignOutAsync@@ &
(@@& '
)@@' (
;@@( )
returnAA 
RedirectToActionAA #
(AA# $
$strAA$ +
,AA+ ,
$strAA- 3
)AA3 4
;AA4 5
}BB 	
[GG 	
	AuthorizeGG	 
]GG 
publicHH 
asyncHH 
TaskHH 
<HH 
IActionResultHH '
>HH' (
ProfileHH) 0
(HH0 1
)HH1 2
{II 	
varJJ 
userJJ 
=JJ 
awaitJJ 
_usersJJ #
.JJ# $
GetUserAsyncJJ$ 0
(JJ0 1
UserJJ1 5
)JJ5 6
;JJ6 7
returnKK 
ViewKK 
(KK 
userKK 
)KK 
;KK 
}LL 	
[QQ 	
HttpPostQQ	 
,QQ 
AllowAnonymousQQ !
]QQ! "
publicRR 
IActionResultRR 
ExternalLoginRR *
(RR* +
stringRR+ 1
providerRR2 :
,RR: ;
stringRR< B
?RRB C
	returnUrlRRD M
=RRN O
nullRRP T
)RRT U
{SS 	
varTT 
redirectUrlTT 
=TT 
UrlTT !
.TT! "
ActionTT" (
(TT( )
nameofTT) /
(TT/ 0!
ExternalLoginCallbackTT0 E
)TTE F
,TTF G
$strTTH Q
,TTQ R
newTTS V
{TTW X
	returnUrlTTY b
}TTc d
)TTd e
;TTe f
varUU 
propsUU 
=UU 
_signInUU 
.UU  5
)ConfigureExternalAuthenticationPropertiesUU  I
(UUI J
providerUUJ R
,UUR S
redirectUrlUUT _
)UU_ `
;UU` a
returnVV 
	ChallengeVV 
(VV 
propsVV "
,VV" #
providerVV$ ,
)VV, -
;VV- .
}WW 	
[YY 	
AllowAnonymousYY	 
]YY 
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
IActionResultZZ '
>ZZ' (!
ExternalLoginCallbackZZ) >
(ZZ> ?
stringZZ? E
?ZZE F
	returnUrlZZG P
=ZZQ R
nullZZS W
,ZZW X
stringZZY _
?ZZ_ `
remoteErrorZZa l
=ZZm n
nullZZo s
)ZZs t
{[[ 	
if\\ 
(\\ 
remoteError\\ 
!=\\ 
null\\ #
)\\# $
{]] 
TempData^^ 
[^^ 
$str^^  
]^^  !
=^^" #
$"^^$ &
$str^^& A
{^^A B
remoteError^^B M
}^^M N
"^^N O
;^^O P
return__ 
RedirectToAction__ '
(__' (
nameof__( .
(__. /
Login__/ 4
)__4 5
)__5 6
;__6 7
}`` 
varbb 
infobb 
=bb 
awaitbb 
_signInbb $
.bb$ %%
GetExternalLoginInfoAsyncbb% >
(bb> ?
)bb? @
;bb@ A
ifcc 
(cc 
infocc 
==cc 
nullcc 
)cc 
returndd 
RedirectToActiondd '
(dd' (
nameofdd( .
(dd. /
Logindd/ 4
)dd4 5
)dd5 6
;dd6 7
vargg 
userNamegg 
=gg 
infogg 
.gg  
	Principalgg  )
.gg) *
FindFirstValuegg* 8
(gg8 9
$strgg9 M
)ggM N
??hh 
infohh "
.hh" #
	Principalhh# ,
.hh, -
FindFirstValuehh- ;
(hh; <

ClaimTypeshh< F
.hhF G
NamehhG K
)hhK L
??ii 
infoii "
.ii" #
	Principalii# ,
.ii, -
Identityii- 5
?ii5 6
.ii6 7
Nameii7 ;
;ii; <
ifkk 
(kk 
stringkk 
.kk 
IsNullOrEmptykk $
(kk$ %
userNamekk% -
)kk- .
)kk. /
{ll 
TempDatamm 
[mm 
$strmm  
]mm  !
=mm" #
$strmm$ L
;mmL M
returnnn 
RedirectToActionnn '
(nn' (
nameofnn( .
(nn. /
Loginnn/ 4
)nn4 5
)nn5 6
;nn6 7
}oo 
varqq 
userqq 
=qq 
awaitqq 
_usersqq #
.qq# $
FindByNameAsyncqq$ 3
(qq3 4
userNameqq4 <
)qq< =
;qq= >
ifrr 
(rr 
userrr 
!=rr 
nullrr 
)rr 
{ss 
awaittt 
_signIntt 
.tt 
SignInAsynctt )
(tt) *
usertt* .
,tt. /
isPersistenttt0 <
:tt< =
falsett> C
)ttC D
;ttD E
returnuu 
RedirectToLocaluu &
(uu& '
	returnUrluu' 0
)uu0 1
;uu1 2
}vv 
TempDataxx 
[xx 
$strxx 
]xx 
=xx 
$"xx  "
$strxx" /
{xx/ 0
userNamexx0 8
}xx8 9
$strxx9 X
"xxX Y
;xxY Z
returnyy 
RedirectToActionyy #
(yy# $
nameofyy$ *
(yy* +
Loginyy+ 0
)yy0 1
)yy1 2
;yy2 3
}zz 	
[ 	
HttpPost	 
, 
AllowAnonymous !
]! "
public
ÄÄ 
IActionResult
ÄÄ 
ExternalRegister
ÄÄ -
(
ÄÄ- .
)
ÄÄ. /
{
ÅÅ 	
var
ÇÇ 
	returnUrl
ÇÇ 
=
ÇÇ 
Url
ÇÇ 
.
ÇÇ  
Action
ÇÇ  &
(
ÇÇ& '
$str
ÇÇ' 0
,
ÇÇ0 1
$str
ÇÇ2 ;
)
ÇÇ; <
;
ÇÇ< =
var
ÉÉ 
url
ÉÉ 
=
ÉÉ 
$"
ÉÉ 
$str
ÉÉ N
{
ÉÉN O
Uri
ÉÉO R
.
ÉÉR S
EscapeDataString
ÉÉS c
(
ÉÉc d
	returnUrl
ÉÉd m
)
ÉÉm n
}
ÉÉn o
"
ÉÉo p
;
ÉÉp q
return
ÑÑ 
Redirect
ÑÑ 
(
ÑÑ 
url
ÑÑ 
)
ÑÑ  
;
ÑÑ  !
}
ÖÖ 	
private
ää 
IActionResult
ää 
RedirectToLocal
ää -
(
ää- .
string
ää. 4
?
ää4 5
	returnUrl
ää6 ?
)
ää? @
{
ãã 	
if
åå 
(
åå 
!
åå 
string
åå 
.
åå 
IsNullOrEmpty
åå %
(
åå% &
	returnUrl
åå& /
)
åå/ 0
&&
åå1 3
Url
åå4 7
.
åå7 8

IsLocalUrl
åå8 B
(
ååB C
	returnUrl
ååC L
)
ååL M
)
ååM N
return
çç 
Redirect
çç 
(
çç  
	returnUrl
çç  )
)
çç) *
;
çç* +
return
èè 
RedirectToAction
èè #
(
èè# $
$str
èè$ -
,
èè- .
$str
èè/ 8
)
èè8 9
;
èè9 :
}
êê 	
}
ëë 
}íí 